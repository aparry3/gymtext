module.exports=[166238,(e,t,r)=>{},791146,832821,437234,e=>{"use strict";e.i(166238),e.i(454188);var t=e.i(331612);let r=t.z.object({DATABASE_URL:t.z.string().min(1,"DATABASE_URL is required"),SESSION_ENCRYPTION_KEY:t.z.string().optional(),TWILIO_ACCOUNT_SID:t.z.string().min(1,"TWILIO_ACCOUNT_SID is required"),TWILIO_AUTH_TOKEN:t.z.string().min(1,"TWILIO_AUTH_TOKEN is required"),TWILIO_NUMBER:t.z.string().min(1,"TWILIO_NUMBER is required"),STRIPE_SECRET_KEY:t.z.string().min(1,"STRIPE_SECRET_KEY is required"),STRIPE_WEBHOOK_SECRET:t.z.string().optional(),OPENAI_API_KEY:t.z.string().min(1,"OPENAI_API_KEY is required"),GOOGLE_API_KEY:t.z.string().min(1,"GOOGLE_API_KEY is required"),XAI_API_KEY:t.z.string().optional(),PINECONE_API_KEY:t.z.string().min(1,"PINECONE_API_KEY is required"),PINECONE_INDEX:t.z.string().min(1,"PINECONE_INDEX is required"),CRON_SECRET:t.z.string().optional(),INNGEST_EVENT_KEY:t.z.string().optional(),INNGEST_SIGNING_KEY:t.z.string().optional(),NODE_ENV:t.z.enum(["development","test","production"]).default("development"),APP_ENV:t.z.enum(["development","staging","production"]).optional()}),n=null;function o(){return n||(n=function(){let e=r.safeParse(process.env);if(!e.success){let t=e.error.errors.map(e=>`  - ${e.path.join(".")}: ${e.message}`).join("\n");throw Error(`Server environment validation failed:
${t}

Ensure all required environment variables are set.`)}return e.data}()),n}function i(){let e=o();return{databaseUrl:e.DATABASE_URL,sessionEncryptionKey:e.SESSION_ENCRYPTION_KEY}}function s(){let e=o();return{accountSid:e.TWILIO_ACCOUNT_SID,authToken:e.TWILIO_AUTH_TOKEN,phoneNumber:e.TWILIO_NUMBER}}function a(){let e=o();return{secretKey:e.STRIPE_SECRET_KEY,webhookSecret:e.STRIPE_WEBHOOK_SECRET}}function u(){let e=o();return{openaiApiKey:e.OPENAI_API_KEY,googleApiKey:e.GOOGLE_API_KEY,xaiApiKey:e.XAI_API_KEY}}function E(){let e=o();return{nodeEnv:e.NODE_ENV,appEnv:e.APP_ENV,isDevelopment:"development"===e.NODE_ENV,isProduction:"production"===e.NODE_ENV,isTest:"test"===e.NODE_ENV}}e.s(["getAiSecrets",()=>u,"getDatabaseSecrets",()=>i,"getStripeSecrets",()=>a,"getTwilioSecrets",()=>s],832821),e.s(["getEnvironmentSettings",()=>E],437234),e.s([],791146)},452130,e=>{"use strict";e.i(454188);var t=e.i(331612);function r(){return!0}t.z.object({NEXT_PUBLIC_BASE_URL:t.z.string().optional(),NEXT_PUBLIC_ANALYTICS_WRITE_KEY:t.z.string().optional(),NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY:t.z.string().optional()}),e.s(["isProductionEnvironment",()=>r])},401573,(e,t,r)=>{var n=e.r(500874),o=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=n:(i(n,r),r.Buffer=s),s.prototype=Object.create(o.prototype),i(o,s),s.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return o(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=o(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return o(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}},462959,(e,t,r)=>{"use strict";function n(e){return(e/8|0)+ +(e%8!=0)}var o={ES256:n(256),ES384:n(384),ES512:n(521)};t.exports=function(e){var t=o[e];if(t)return t;throw Error('Unknown algorithm "'+e+'"')}},384423,(e,t,r)=>{"use strict";var n=e.r(401573).Buffer,o=e.r(462959);function i(e){if(n.isBuffer(e))return e;if("string"==typeof e)return n.from(e,"base64");throw TypeError("ECDSA signature must be a Base64 string or a Buffer")}function s(e,t,r){for(var n=0;t+n<r&&0===e[t+n];)++n;return e[t+n]>=128&&--n,n}t.exports={derToJose:function(e,t){e=i(e);var r=o(t),s=r+1,a=e.length,u=0;if(48!==e[u++])throw Error('Could not find expected "seq"');var E=e[u++];if(129===E&&(E=e[u++]),a-u<E)throw Error('"seq" specified length of "'+E+'", only "'+(a-u)+'" remaining');if(2!==e[u++])throw Error('Could not find expected "int" for "r"');var l=e[u++];if(a-u-2<l)throw Error('"r" specified length of "'+l+'", only "'+(a-u-2)+'" available');if(s<l)throw Error('"r" specified length of "'+l+'", max of "'+s+'" is acceptable');var c=u;if(u+=l,2!==e[u++])throw Error('Could not find expected "int" for "s"');var f=e[u++];if(a-u!==f)throw Error('"s" specified length of "'+f+'", expected "'+(a-u)+'"');if(s<f)throw Error('"s" specified length of "'+f+'", max of "'+s+'" is acceptable');var p=u;if((u+=f)!==a)throw Error('Expected to consume entire buffer, but "'+(a-u)+'" bytes remain');var _=r-l,g=r-f,m=n.allocUnsafe(_+l+g+f);for(u=0;u<_;++u)m[u]=0;e.copy(m,u,c+Math.max(-_,0),c+l),u=r;for(var T=u;u<T+g;++u)m[u]=0;return e.copy(m,u,p+Math.max(-g,0),p+f),m=(m=m.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=i(e);var r=o(t),a=e.length;if(a!==2*r)throw TypeError('"'+t+'" signatures must be "'+2*r+'" bytes, saw "'+a+'"');var u=s(e,0,r),E=s(e,r,e.length),l=r-u,c=r-E,f=2+l+1+1+c,p=f<128,_=n.allocUnsafe((p?2:3)+f),g=0;return _[g++]=48,p?_[g++]=f:(_[g++]=129,_[g++]=255&f),_[g++]=2,_[g++]=l,u<0?(_[g++]=0,g+=e.copy(_,g,0,r)):g+=e.copy(_,g,u,r),_[g++]=2,_[g++]=c,E<0?(_[g++]=0,e.copy(_,g,r)):e.copy(_,g,r+E),_}}},704503,(e,t,r)=>{"use strict";var n=e.r(500874).Buffer,o=e.r(500874).SlowBuffer;function i(e,t){if(!n.isBuffer(e)||!n.isBuffer(t)||e.length!==t.length)return!1;for(var r=0,o=0;o<e.length;o++)r|=e[o]^t[o];return 0===r}t.exports=i,i.install=function(){n.prototype.equal=o.prototype.equal=function(e){return i(this,e)}};var s=n.prototype.equal,a=o.prototype.equal;i.restore=function(){n.prototype.equal=s,o.prototype.equal=a}},875559,e=>{"use strict";e.i(454188);var t=e.i(331612);let r=t.z.object({messageHistoryLimit:t.z.number().int().positive().default(5),includeSystemMessages:t.z.boolean().default(!0),maxContextTokens:t.z.number().int().positive().default(1e3),reserveTokensForResponse:t.z.number().int().positive().default(1500),conversationGapMinutes:t.z.number().int().positive().default(30),enableCaching:t.z.boolean().default(!0),cacheTTLSeconds:t.z.number().int().nonnegative().default(600)}),n=t.z.object({smsMaxLength:t.z.number().int().positive().default(1600),contextMinutes:t.z.number().int().positive().default(10)}),o=t.z.enum(["twilio","local"]),i=t.z.object({provider:o.default("twilio")}),s=t.z.object({agentLogging:t.z.boolean().default(!1),enableConversationStorage:t.z.boolean().default(!0)}),a=t.z.object({timeoutMinutes:t.z.number().int().positive().default(30),maxLength:t.z.number().int().positive().default(100),inactiveThresholdDays:t.z.number().int().positive().default(7)}),u=t.z.object({defaultExpiryDays:t.z.number().int().positive().default(7),domain:t.z.string().optional()}),E=t.z.object({priceId:t.z.string().min(1)}),l=t.z.object({phoneNumbers:t.z.array(t.z.string()).default([]),maxRequestsPerWindow:t.z.number().int().positive().default(3),rateLimitWindowMinutes:t.z.number().int().positive().default(15),codeExpiryMinutes:t.z.number().int().positive().default(10),codeLength:t.z.number().int().positive().default(6),devBypassCode:t.z.string().optional()}),c=t.z.object({baseUrl:t.z.string().optional(),publicBaseUrl:t.z.string().optional()}),f=t.z.object({environment:t.z.enum(["development","staging","production"]),context:r,chat:n,messaging:i,features:s,conversation:a,shortLinks:u,stripe:E,admin:l,urls:c});function p(e){if(!e)return;let t=parseInt(e,10);return isNaN(t)?void 0:t}function _(e){if(void 0!==e)return"true"===e}let g=null;function m(){return g||(g=function(){var e;let t="staging"===process.env.APP_ENV?"staging":"production",r={environment:t,context:{messageHistoryLimit:p(process.env.CONTEXT_MESSAGE_HISTORY_LIMIT),includeSystemMessages:_(process.env.CONTEXT_INCLUDE_SYSTEM_MESSAGES),maxContextTokens:p(process.env.CONTEXT_MAX_TOKENS),reserveTokensForResponse:p(process.env.CONTEXT_RESERVE_TOKENS),conversationGapMinutes:p(process.env.CONTEXT_CONVERSATION_GAP_MINUTES),enableCaching:_(process.env.CONTEXT_ENABLE_CACHING),cacheTTLSeconds:p(process.env.CONTEXT_CACHE_TTL)},chat:{smsMaxLength:p(process.env.SMS_MAX_LENGTH),contextMinutes:p(process.env.CHAT_CONTEXT_MINUTES)},messaging:{provider:process.env.MESSAGING_PROVIDER},features:{agentLogging:_(process.env.AGENT_LOGGING),enableConversationStorage:_(process.env.ENABLE_CONVERSATION_STORAGE)},conversation:{timeoutMinutes:p(process.env.CONVERSATION_TIMEOUT_MINUTES),maxLength:p(process.env.MAX_CONVERSATION_LENGTH),inactiveThresholdDays:p(process.env.INACTIVE_THRESHOLD_DAYS)},shortLinks:{defaultExpiryDays:p(process.env.SHORT_LINK_DEFAULT_EXPIRY_DAYS),domain:process.env.SHORT_LINK_DOMAIN},stripe:{priceId:process.env.STRIPE_PRICE_ID},admin:{phoneNumbers:process.env.ADMIN_PHONE_NUMBERS?(e=process.env.ADMIN_PHONE_NUMBERS)?e.split(",").map(e=>e.trim()).filter(e=>e.length>0):[]:void 0,devBypassCode:process.env.DEV_BYPASS_CODE},urls:{baseUrl:process.env.BASE_URL,publicBaseUrl:"http://localhost:3001"}},n=f.safeParse(r);if(!n.success){let e=n.error.errors.map(e=>`  - ${e.path.join(".")}: ${e.message}`).join("\n");throw Error(`Configuration validation failed:
${e}

Environment: ${t}
Check your environment variables.`)}return n.data}()),g}e.i(452130);let T=null;function v(){return m().chat}function d(){return m().messaging}function N(){return m().features}function I(){return m().shortLinks}function S(){return m().stripe}function A(){return m().admin}function O(){return m().urls}new Proxy({},{get:(e,t)=>(!T&&(T=m()),T)[t]}),e.s(["getAdminConfig",()=>A,"getChatConfig",()=>v,"getFeatureFlags",()=>N,"getMessagingConfig",()=>d,"getShortLinksConfig",()=>I,"getStripeConfig",()=>S,"getUrlsConfig",()=>O],875559)}];

//# sourceMappingURL=_0ad706ba._.js.map