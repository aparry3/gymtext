module.exports=[641058,a=>{"use strict";var b=a.i(281156),c=a.i(530341),d=a.i(387286),e=a.i(699235),f=a.i(220338),g=a.i(453593),h=a.i(422065),i=a.i(531435),j=a.i(559201),k=a.i(926445);function l(a){return a.blocks&&Array.isArray(a.blocks)?a.blocks:a.details&&a.details.blocks&&Array.isArray(a.details.blocks)?a.details.blocks:[]}function m(a){let b=[];if(a.work&&Array.isArray(a.work))for(let c of a.work)c.exercises&&Array.isArray(c.exercises)&&b.push(...c.exercises);return a.items&&Array.isArray(a.items)&&b.push(...a.items),b}function n({userId:a,workoutId:f,basePath:h,showAdminActions:m=!0}){let n=(0,c.useRouter)(),[r,t]=(0,d.useState)(null),[u,v]=(0,d.useState)(!0),[w,x]=(0,d.useState)(null),[y,z]=(0,d.useState)(!1);(0,d.useEffect)(()=>{(async()=>{v(!0),x(null);try{let b=`/api/users/${a}/workouts/${f}`;console.log("Fetching workout from:",b),console.log("User ID:",a,"Workout ID:",f);let c=await fetch(b);if(console.log("Response status:",c.status),!c.ok){let a=await c.text();throw console.error("API Error Response:",a),Error(`Failed to fetch workout: ${c.status}`)}let d=await c.json();if(console.log("API Result:",d),d.success){let a={...d.data,date:(0,k.parseDate)(d.data.date),completedAt:d.data.completedAt?new Date(d.data.completedAt):null};t(a)}else x(d.message||"Failed to load workout")}catch(a){console.error("Error fetching workout:",a),x("Failed to load workout data")}finally{v(!1)}})()},[a,f]);let A=async()=>{if(confirm("Are you sure you want to delete this workout? This action cannot be undone.")){z(!0);try{let b=await fetch(`/api/users/${a}/workouts/${f}`,{method:"DELETE"}),c=await b.json();if(c.success){let b="/me"===h?"/me":`${h}/${a}`;n.push(b)}else alert(c.message||"Failed to delete workout")}catch(a){console.error("Error deleting workout:",a),alert("Failed to delete workout")}finally{z(!1)}}};return u?(0,b.jsx)(s,{}):w||!r?(0,b.jsx)("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("p",{className:"text-lg text-muted-foreground mb-4",children:w||"Workout not found"}),(0,b.jsx)(g.Button,{onClick:()=>n.push("/me"===h?"/me":`${h}/${a}`),variant:"outline",children:"Back to User"})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50/50",children:(0,b.jsx)("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(i.Breadcrumb,{children:(0,b.jsxs)(i.BreadcrumbList,{children:[(0,b.jsx)(i.BreadcrumbItem,{children:(0,b.jsx)(i.BreadcrumbLink,{href:"/me"===h?"/me":"/users",children:"/me"===h?"My Profile":"Users"})}),(0,b.jsx)(i.BreadcrumbSeparator,{}),"/me"!==h&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.BreadcrumbItem,{children:(0,b.jsx)(i.BreadcrumbLink,{href:`${h}/${a}`,children:"User Profile"})}),(0,b.jsx)(i.BreadcrumbSeparator,{})]}),(0,b.jsx)(i.BreadcrumbItem,{children:(0,b.jsxs)(i.BreadcrumbPage,{children:[{run:"Run",lift:"Lift",metcon:"MetCon",mobility:"Mobility",rest:"Rest",other:"Other"}[r.sessionType]," - ",(0,k.formatDate)(r.date)]})})]})}),(0,b.jsx)(p,{workout:r,onDelete:A,isDeleting:y,showAdminActions:m}),l(r).length>0&&(0,b.jsx)(o,{workout:r}),r.goal&&(0,b.jsxs)(e.Card,{className:"p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Goal"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:r.goal})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Workout Details"}),(0,b.jsxs)(j.Tabs,{defaultValue:"blocks",className:"w-full",children:[(0,b.jsxs)(j.TabsList,{children:[(0,b.jsx)(j.TabsTrigger,{value:"blocks",children:"Blocks"}),(0,b.jsx)(j.TabsTrigger,{value:"description",children:"Description"}),(0,b.jsx)(j.TabsTrigger,{value:"reasoning",children:"Reasoning"}),(0,b.jsx)(j.TabsTrigger,{value:"message",children:"Message"})]}),(0,b.jsx)(j.TabsContent,{value:"blocks",children:l(r).length>0?(0,b.jsx)(q,{blocks:l(r)}):(0,b.jsx)(e.Card,{className:"p-8 text-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"No workout blocks available"})})}),(0,b.jsx)(j.TabsContent,{value:"description",children:(0,b.jsx)(e.Card,{className:"p-6",children:r.description?(0,b.jsx)("p",{className:"text-muted-foreground whitespace-pre-wrap",children:r.description}):(0,b.jsx)("p",{className:"text-muted-foreground text-center",children:"No description available"})})}),(0,b.jsx)(j.TabsContent,{value:"reasoning",children:(0,b.jsx)(e.Card,{className:"p-6",children:r.reasoning?(0,b.jsx)("p",{className:"text-muted-foreground whitespace-pre-wrap",children:r.reasoning}):(0,b.jsx)("p",{className:"text-muted-foreground text-center",children:"No reasoning available"})})}),(0,b.jsx)(j.TabsContent,{value:"message",children:(0,b.jsx)(e.Card,{className:"p-6",children:r.message?(0,b.jsx)("p",{className:"text-muted-foreground whitespace-pre-wrap",children:r.message}):(0,b.jsx)("p",{className:"text-muted-foreground text-center",children:"No message available"})})})]})]})]})})})}function o({workout:a}){let c=l(a),d=c.reduce((a,b)=>a+m(b).length,0),g=c.reduce((a,b)=>a+m(b).reduce((a,b)=>a+(b.sets||0),0),0),h=c.reduce((a,b)=>(m(b).forEach(b=>{a[b.type]=(a[b.type]||0)+1}),a),{}),i=c.reduce((a,b)=>a+m(b).reduce((a,b)=>{if(b.durationMin&&b.durationMin>0)return a+b.durationMin;if(b.durationSec&&b.durationSec>0)return a+b.durationSec/60;if(b.sets&&b.sets>0){let c=b.restSec&&b.restSec>0?b.restSec/60:b.restText?parseFloat(b.restText)/60:1.5;return a+b.sets*(.5+c)}return a},0),0);return(0,b.jsxs)(e.Card,{className:"p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Workout Summary"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[(0,b.jsx)("div",{className:"text-sm text-blue-700 mb-1",children:"Total Blocks"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-900",children:c.length})]}),(0,b.jsxs)("div",{className:"p-3 bg-green-50 rounded-lg",children:[(0,b.jsx)("div",{className:"text-sm text-green-700 mb-1",children:"Total Exercises"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-green-900",children:d})]}),(0,b.jsxs)("div",{className:"p-3 bg-purple-50 rounded-lg",children:[(0,b.jsx)("div",{className:"text-sm text-purple-700 mb-1",children:"Total Sets"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-purple-900",children:g})]}),(0,b.jsxs)("div",{className:"p-3 bg-orange-50 rounded-lg",children:[(0,b.jsx)("div",{className:"text-sm text-orange-700 mb-1",children:"Est. Duration"}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-orange-900",children:[Math.round(i),"m"]})]})]}),Object.keys(h).length>0&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("div",{className:"text-sm font-medium mb-2",children:"Exercise Breakdown"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(h).map(([a,c])=>(0,b.jsxs)(f.Badge,{variant:"outline",className:"text-xs",children:[a,": ",c]},a))})]})]})}function p({workout:a,onDelete:c,isDeleting:d,showAdminActions:h=!0}){return(0,b.jsx)(e.Card,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("h1",{className:"text-2xl font-semibold",children:[{run:"Run",lift:"Lift",metcon:"MetCon",mobility:"Mobility",rest:"Rest",other:"Other"}[a.sessionType]," Workout"]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:(0,k.formatDate)(a.date,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),void 0!==a.mesocycleIndex&&void 0!==a.microcycleWeek&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Mesocycle ",a.mesocycleIndex+1," • Week ",a.microcycleWeek+1]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 items-end",children:[(0,b.jsx)(f.Badge,{variant:a.completedAt?"default":"secondary",children:a.completedAt?"Completed":"Planned"}),a.completedAt&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground text-right",children:["Completed ",new Date(a.completedAt).toLocaleDateString()]}),h&&(0,b.jsx)(g.Button,{variant:"destructive",size:"sm",onClick:c,disabled:d,className:"mt-2",children:d?"Deleting...":"Delete Workout"})]})]})})}function q({blocks:a}){return(0,b.jsx)("div",{className:"space-y-4",children:a.map((a,c)=>{let d=m(a);return(0,b.jsxs)(e.Card,{className:"p-6",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("h4",{className:"text-lg font-semibold",children:a.name}),a.goal&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:a.goal})]}),a.work&&a.work.length>0?(0,b.jsx)("div",{className:"space-y-4",children:a.work.map((a,c)=>(0,b.jsxs)("div",{className:"space-y-3",children:["straight"!==a.structureType&&(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(f.Badge,{variant:"secondary",className:"text-xs",children:a.structureType}),a.rounds&&(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:[a.rounds," rounds"]})]}),a.exercises.map((a,c)=>(0,b.jsx)(r,{item:a},c)),a.notes&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground italic mt-2",children:a.notes})]},c))}):(0,b.jsx)("div",{className:"space-y-3",children:d.map((a,c)=>(0,b.jsx)(r,{item:a},c))}),a.notes&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground italic mt-4 pt-4 border-t",children:a.notes})]},c)})})}function r({item:a}){return(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg border bg-card",children:[(0,b.jsx)(f.Badge,{variant:"outline",className:`text-xs ${{prep:"bg-blue-50 text-blue-700",compound:"bg-red-50 text-red-700",secondary:"bg-orange-50 text-orange-700",accessory:"bg-green-50 text-green-700",core:"bg-purple-50 text-purple-700",cardio:"bg-pink-50 text-pink-700",cooldown:"bg-gray-50 text-gray-700"}[a.type]}`,children:a.type}),(0,b.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsx)("h5",{className:"font-medium",children:a.exercise}),a.equipment&&(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:a.equipment})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 text-sm text-muted-foreground",children:[a.sets&&a.sets>0&&(0,b.jsxs)("span",{children:[a.sets," sets"]}),a.reps&&""!==a.reps&&(0,b.jsxs)("span",{children:[a.reps," reps"]}),a.durationMin&&a.durationMin>0&&(0,b.jsxs)("span",{children:[a.durationMin," min"]}),a.durationSec&&a.durationSec>0&&(0,b.jsxs)("span",{children:[a.durationSec,"s"]}),a.RPE&&a.RPE>0&&a.RPE<=10&&(0,b.jsxs)(f.Badge,{variant:"outline",className:"text-xs",children:["RPE ",a.RPE]}),void 0!==a.rir&&null!==a.rir&&a.rir>=0&&(0,b.jsxs)(f.Badge,{variant:"outline",className:"text-xs",children:["RIR ",a.rir]}),a.percentageRM&&a.percentageRM>0&&a.percentageRM<=100&&(0,b.jsxs)(f.Badge,{variant:"outline",className:"text-xs",children:[a.percentageRM,"% RM"]}),a.tempo&&""!==a.tempo&&(0,b.jsxs)("span",{children:["Tempo: ",a.tempo]}),a.restSec&&a.restSec>0&&(0,b.jsxs)("span",{children:["Rest: ",a.restSec,"s"]}),a.restText&&""!==a.restText&&(0,b.jsxs)("span",{children:["Rest: ",a.restText]})]}),a.cues&&a.cues.length>0&&(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,b.jsx)("strong",{children:"Cues:"})," ",a.cues.join(" • ")]}),a.notes&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground italic",children:a.notes})]})]})}function s(){return(0,b.jsx)("div",{className:"min-h-screen bg-gray-50/50",children:(0,b.jsx)("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(h.Skeleton,{className:"h-6 w-96"}),(0,b.jsx)(e.Card,{className:"p-6",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(h.Skeleton,{className:"h-8 w-48"}),(0,b.jsx)(h.Skeleton,{className:"h-4 w-64"}),(0,b.jsx)(h.Skeleton,{className:"h-4 w-32"})]})}),(0,b.jsxs)(e.Card,{className:"p-6",children:[(0,b.jsx)(h.Skeleton,{className:"h-6 w-16 mb-2"}),(0,b.jsx)(h.Skeleton,{className:"h-12 w-full"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(h.Skeleton,{className:"h-6 w-32"}),Array.from({length:3}).map((a,c)=>(0,b.jsxs)(e.Card,{className:"p-6",children:[(0,b.jsx)(h.Skeleton,{className:"h-6 w-24 mb-4"}),(0,b.jsx)("div",{className:"space-y-3",children:Array.from({length:4}).map((a,c)=>(0,b.jsx)(h.Skeleton,{className:"h-16 w-full"},c))})]},c))]})]})})})}function t(){let{id:a,workoutId:d}=(0,c.useParams)();return(0,b.jsx)(n,{userId:a,workoutId:d,basePath:"/users",showAdminActions:!0})}a.s(["default",()=>t],641058)}];

//# sourceMappingURL=9310b_src_app_%28protected%29_users_%5Bid%5D_program_workouts_%5BworkoutId%5D_page_tsx_05d21c63._.js.map