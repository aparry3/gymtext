module.exports=[556704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},120635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},69794,(a,b,c)=>{"use strict";b.exports=a.r(679777).vendored.contexts.AppRouterContext},707287,(a,b,c)=>{"use strict";b.exports=a.r(679777).vendored.contexts.HooksClientContext},595393,(a,b,c)=>{"use strict";b.exports=a.r(679777).vendored.contexts.ServerInsertedHtml},618411,(a,b,c)=>{"use strict";b.exports=a.r(679777).vendored["react-ssr"].ReactServerDOMTurbopackClient},453593,a=>{"use strict";var b=a.i(281156);let c=a.i(387286).forwardRef(({className:a="",variant:c="default",size:d="default",...e},f)=>(0,b.jsx)("button",{className:`inline-flex items-center justify-center whitespace-nowrap rounded-xl text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 shadow-sm ${{default:"bg-blue-600 text-white hover:bg-blue-700 shadow-lg shadow-blue-600/25 hover:shadow-xl hover:shadow-blue-600/30 hover:scale-[1.02]",destructive:"bg-red-600 text-white hover:bg-red-700 shadow-lg shadow-red-600/25 hover:shadow-xl hover:shadow-red-600/30 hover:scale-[1.02]",outline:"border border-gray-200 bg-white text-gray-700 hover:bg-gray-50 shadow-sm hover:shadow-md hover:border-gray-300",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200 hover:scale-[1.02]",ghost:"text-gray-600 hover:bg-gray-100 hover:text-gray-900",link:"text-blue-600 underline-offset-4 hover:underline hover:text-blue-700"}[c]} ${{default:"h-10 px-4 py-2",sm:"h-9 rounded-xl px-3 text-sm",lg:"h-11 rounded-xl px-8 text-base",icon:"h-10 w-10"}[d]} ${a}`,ref:f,...e}));c.displayName="Button",a.s(["Button",()=>c])},699235,a=>{"use strict";var b=a.i(281156),c=a.i(387286);let d=c.forwardRef(({className:a="",...c},d)=>(0,b.jsx)("div",{ref:d,className:`rounded-2xl border-0 bg-white shadow-lg shadow-black/[0.03] ring-1 ring-black/[0.05] ${a}`,...c}));d.displayName="Card",c.forwardRef(({className:a="",...c},d)=>(0,b.jsx)("div",{ref:d,className:`flex flex-col space-y-1.5 p-6 ${a}`,...c})).displayName="CardHeader",c.forwardRef(({className:a="",...c},d)=>(0,b.jsx)("h3",{ref:d,className:`text-2xl font-semibold leading-none tracking-tight ${a}`,...c})).displayName="CardTitle",c.forwardRef(({className:a="",...c},d)=>(0,b.jsx)("p",{ref:d,className:`text-sm text-muted-foreground ${a}`,...c})).displayName="CardDescription",c.forwardRef(({className:a="",...c},d)=>(0,b.jsx)("div",{ref:d,className:`p-6 pt-0 ${a}`,...c})).displayName="CardContent",c.forwardRef(({className:a="",...c},d)=>(0,b.jsx)("div",{ref:d,className:`flex items-center p-6 pt-0 ${a}`,...c})).displayName="CardFooter",a.s(["Card",()=>d])},574672,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(387286);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},134790,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},422065,a=>{"use strict";var b=a.i(281156);let c=a.i(387286).forwardRef(({className:a="",...c},d)=>(0,b.jsx)("div",{ref:d,className:`animate-pulse rounded-md bg-muted ${a}`,...c}));c.displayName="Skeleton",a.s(["Skeleton",()=>c])},220338,a=>{"use strict";var b=a.i(281156);function c({className:a="",variant:c="default",...d}){return(0,b.jsx)("div",{className:`inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 ${{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}[c]} ${a}`,...d})}a.s(["Badge",()=>c])},61559,a=>{"use strict";var b=a.i(281156),c=a.i(453593);function d({currentPage:a,totalPages:d,onPageChange:h,totalItems:i,itemsPerPage:j}){let k=function(a,b){if(b<=7)return Array.from({length:b},(a,b)=>b+1);let c=[];if(c.push(1),a<=4){for(let a=2;a<=5;a++)c.push(a);c.push("..."),c.push(b)}else if(a>=b-3){c.push("...");for(let a=b-4;a<=b;a++)c.push(a)}else{c.push("...");for(let b=a-1;b<=a+1;b++)c.push(b);c.push("..."),c.push(b)}return c}(a,d),l=(a-1)*(j||10)+1,m=Math.min(a*(j||10),i||0);return(0,b.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[i&&(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",l,"-",m," of ",i," results"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsxs)(c.Button,{variant:"outline",size:"sm",onClick:()=>h(a-1),disabled:a<=1,className:"gap-1",children:[(0,b.jsx)(e,{className:"h-4 w-4"}),"Previous"]}),(0,b.jsx)("div",{className:"flex items-center gap-1 mx-2",children:k.map((d,e)=>{if("..."===d)return(0,b.jsx)("div",{className:"px-2",children:(0,b.jsx)(g,{className:"h-4 w-4 text-muted-foreground"})},`ellipsis-${e}`);let f=Number(d),i=f===a;return(0,b.jsx)(c.Button,{variant:i?"default":"outline",size:"sm",onClick:()=>h(f),className:"min-w-8",children:f},f)})}),(0,b.jsxs)(c.Button,{variant:"outline",size:"sm",onClick:()=>h(a+1),disabled:a>=d,className:"gap-1",children:["Next",(0,b.jsx)(f,{className:"h-4 w-4"})]})]})]})}let e=({className:a})=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),f=({className:a})=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),g=({className:a})=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})});a.s(["Pagination",()=>d])},795968,a=>{"use strict";var b=a.i(281156);let c=a.i(387286).forwardRef(({className:a="",type:c,...d},e)=>(0,b.jsx)("input",{type:c,className:`flex h-10 w-full rounded-lg border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${a}`,ref:e,...d}));c.displayName="Input",a.s(["Input",()=>c])},545748,a=>{"use strict";var b=a.i(281156),c=a.i(453593);function d({title:a,subtitle:d,onRefresh:f,isLoading:g=!1,actions:h}){return(0,b.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold",children:a}),d&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:d})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[f&&(0,b.jsxs)(c.Button,{variant:"outline",size:"sm",onClick:f,disabled:g,className:"gap-2",children:[(0,b.jsx)(e,{className:`h-4 w-4 ${g?"animate-spin":""}`}),"Refresh"]}),h]})]})}let e=({className:a})=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})});a.s(["AdminHeader",()=>d])},469336,a=>{"use strict";var b=a.i(281156),c=a.i(387286);let d=c.createContext({open:!1,setOpen:()=>{}}),e=({children:a})=>{let[e,f]=c.useState(!1);return(0,b.jsx)(d.Provider,{value:{open:e,setOpen:f},children:(0,b.jsx)("div",{className:"relative",children:a})})},f=c.forwardRef(({className:a="",onClick:e,asChild:f=!1,children:g,...h},i)=>{let{open:j,setOpen:k}=c.useContext(d),l=a=>{k(!j),e?.(a)};return f&&c.isValidElement(g)?c.cloneElement(g,{onClick:a=>{l(a);let b=g.props;b.onClick?.(a)}}):(0,b.jsx)("button",{ref:i,className:a,onClick:l,...h,children:g})});f.displayName="PopoverTrigger";let g=c.forwardRef(({className:a="",align:e="center",side:f="bottom",children:g,...h},i)=>{let{open:j,setOpen:k}=c.useContext(d),l=c.useRef(null);return(c.useEffect(()=>{let a=a=>{l.current&&!l.current.contains(a.target)&&k(!1)};if(j)return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[j,k]),j)?(0,b.jsx)("div",{ref:a=>{l.current=a,"function"==typeof i?i(a):i&&(i.current=a)},className:`absolute z-50 min-w-[8rem] rounded-md border bg-white p-4 text-foreground shadow-md ${{top:"bottom-full mb-2",right:"left-full ml-2 top-0",bottom:"top-full mt-2",left:"right-full mr-2 top-0"}[f]} ${{start:"top"===f||"bottom"===f?"left-0":"top-0",center:"top"===f||"bottom"===f?"left-1/2 transform -translate-x-1/2":"top-1/2 transform -translate-y-1/2",end:"top"===f||"bottom"===f?"right-0":"bottom-0"}[e]} ${a}`,...h,children:g}):null});g.displayName="PopoverContent",a.s(["Popover",()=>e,"PopoverContent",()=>g,"PopoverTrigger",()=>f])},539335,a=>{"use strict";var b=a.i(281156),c=a.i(387286),d=a.i(530341),e=a.i(545748),f=a.i(962781),g=a.i(188581),h=a.i(61559),i=a.i(699235),j=a.i(422065);function k(){let a=(0,d.useSearchParams)(),[j,k]=(0,c.useState)([]),[r,s]=(0,c.useState)({totalMessages:0,inbound:0,outbound:0,pending:0,failed:0}),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(1),[z,A]=(0,c.useState)(1),B={search:a?.get("search")||void 0,direction:a?.get("direction")||void 0,status:a?.get("status")||void 0},[C,D]=(0,c.useState)(B),E=(0,c.useCallback)(async(a,b)=>{u(!0),w(null);try{let c=new URLSearchParams;a.search&&c.set("search",a.search),a.direction&&c.set("direction",a.direction),a.status&&c.set("status",a.status),c.set("page",String(b)),c.set("pageSize","50");let d=await fetch(`/api/messages?${c.toString()}`),e=await d.json();if(!d.ok||!e.success)throw Error(e.message||"Failed to fetch messages");let{messages:f,pagination:g,stats:h}=e.data;k(f),A(g.totalPages),s(h)}catch(a){w("Failed to load messages"),console.error("Error fetching messages:",a)}finally{u(!1)}},[]);(0,c.useEffect)(()=>{E(C,x)},[E,C,x]);let F=(0,c.useCallback)(a=>{D(a),y(1)},[]),G=(0,c.useCallback)(a=>{y(a)},[]),H=(0,c.useCallback)(()=>{E(C,x)},[E,C,x]);return(0,b.jsx)("div",{className:"min-h-screen bg-gray-50/50",children:(0,b.jsx)("div",{className:"container mx-auto px-4 py-6 max-w-7xl",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(e.AdminHeader,{title:"Messages",subtitle:`${r.totalMessages} total messages`,onRefresh:H,isLoading:t}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-5",children:[(0,b.jsx)(l,{title:"Total",value:r.totalMessages,icon:(0,b.jsx)(m,{className:"h-5 w-5"}),variant:"primary",isLoading:t}),(0,b.jsx)(l,{title:"Inbound",value:r.inbound,icon:(0,b.jsx)(n,{className:"h-5 w-5"}),variant:"warning",isLoading:t}),(0,b.jsx)(l,{title:"Outbound",value:r.outbound,icon:(0,b.jsx)(o,{className:"h-5 w-5"}),variant:"info",isLoading:t}),(0,b.jsx)(l,{title:"Pending",value:r.pending,icon:(0,b.jsx)(p,{className:"h-5 w-5"}),variant:"secondary",isLoading:t}),(0,b.jsx)(l,{title:"Failed",value:r.failed,icon:(0,b.jsx)(q,{className:"h-5 w-5"}),variant:"danger",isLoading:t})]}),v&&(0,b.jsx)(i.Card,{className:"border-destructive/20 bg-destructive/5 p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("p",{className:"text-sm text-destructive",children:v}),(0,b.jsx)("button",{onClick:H,className:"text-sm text-destructive hover:underline",children:"Retry"})]})}),(0,b.jsx)(f.MessagesFilters,{onFiltersChange:F,isLoading:t}),(0,b.jsx)(g.MessagesTable,{messages:j,isLoading:t,showUserColumn:!0}),z>1&&(0,b.jsx)(h.Pagination,{currentPage:x,totalPages:z,onPageChange:G,totalItems:r.totalMessages,itemsPerPage:50})]})})})}function l({title:a,value:c,icon:d,variant:e,isLoading:f=!1}){return f?(0,b.jsx)(i.Card,{className:"p-4 hover:shadow-xl transition-shadow duration-200",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(j.Skeleton,{className:"h-10 w-10 rounded-xl"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Skeleton,{className:"h-3 w-16"}),(0,b.jsx)(j.Skeleton,{className:"h-5 w-8"})]})]})}):(0,b.jsx)(i.Card,{className:"p-4 hover:shadow-xl transition-shadow duration-200 border group",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`flex h-10 w-10 items-center justify-center rounded-xl border transition-colors duration-200 ${{primary:"bg-blue-50 text-blue-600 border-blue-100",success:"bg-green-50 text-green-600 border-green-100",warning:"bg-orange-50 text-orange-600 border-orange-100",info:"bg-sky-50 text-sky-600 border-sky-100",secondary:"bg-gray-50 text-gray-600 border-gray-100",danger:"bg-red-50 text-red-600 border-red-100"}[e]} group-hover:scale-105`,children:d}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-gray-600",children:a}),(0,b.jsx)("p",{className:"text-xl font-bold text-gray-900",children:c})]})]})})}let m=({className:a})=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z"})}),n=({className:a})=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 4.5l-15 15m0 0h11.25m-11.25 0V8.25"})}),o=({className:a})=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 19.5l15-15m0 0H8.25m11.25 0v11.25"})}),p=({className:a})=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),q=({className:a})=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})});function r(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"container mx-auto px-4 py-6 max-w-7xl",children:(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"text-lg text-muted-foreground",children:"Loading..."})})}),children:(0,b.jsx)(k,{})})}a.s(["default",()=>r])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e522f3db._.js.map