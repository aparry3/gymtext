module.exports=[962781,188581,a=>{"use strict";var b=a.i(281156),c=a.i(387286),d=a.i(530341),e=a.i(795968),f=a.i(453593),g=a.i(220338),h=a.i(469336);function i({onFiltersChange:a,isLoading:i=!1,basePath:m="/messages"}){let n=(0,d.useRouter)(),o=(0,d.useSearchParams)(),[p,q]=(0,c.useState)(o.get("search")||""),[r,s]=(0,c.useState)({search:o.get("search")||void 0,direction:o.get("direction")||void 0,status:o.get("status")||void 0});(0,c.useEffect)(()=>{let a=setTimeout(()=>{s(a=>({...a,search:p||void 0}))},300);return()=>clearTimeout(a)},[p]),(0,c.useEffect)(()=>{let b=new URLSearchParams;Object.entries(r).forEach(([a,c])=>{void 0!==c&&""!==c&&b.set(a,c.toString())});let c=b.toString()?`${m}?${b.toString()}`:m;n.replace(c,{scroll:!1}),a(r)},[r,a,n,m]);let t=(0,c.useCallback)((a,b)=>{s(c=>({...c,[a]:b}))},[]),u=(0,c.useCallback)(a=>{s(b=>({...b,[a]:void 0})),"search"===a&&q("")},[]),v=(0,c.useCallback)(()=>{q(""),s({})},[]),w=Object.values(r).filter(a=>void 0!==a&&""!==a).length;return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(k,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(e.Input,{placeholder:"Search by phone or name...",value:p,onChange:a=>q(a.target.value),className:"pl-10",disabled:i})]}),(0,b.jsxs)(h.Popover,{children:[(0,b.jsx)(h.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{variant:"outline",className:"gap-2",disabled:i,children:[(0,b.jsx)(l,{className:"h-4 w-4"}),"Filters",w>0&&(0,b.jsx)(g.Badge,{variant:"secondary",className:"ml-1 h-5 min-w-5 rounded-full px-1 text-xs",children:w})]})}),(0,b.jsx)(h.PopoverContent,{className:"w-80",align:"end",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h4",{className:"font-medium",children:"Filters"}),w>0&&(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:v,className:"h-auto p-0 text-xs",children:"Clear all"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Direction"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{variant:"inbound"===r.direction?"default":"outline",size:"sm",onClick:()=>t("direction","inbound"===r.direction?void 0:"inbound"),children:"Inbound"}),(0,b.jsx)(f.Button,{variant:"outbound"===r.direction?"default":"outline",size:"sm",onClick:()=>t("direction","outbound"===r.direction?void 0:"outbound"),children:"Outbound"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Status"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:["pending","sent","delivered","failed"].map(a=>(0,b.jsx)(f.Button,{variant:r.status===a?"default":"outline",size:"sm",onClick:()=>t("status",r.status===a?void 0:a),children:a.charAt(0).toUpperCase()+a.slice(1)},a))})]})]})})]})]}),w>0&&(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),r.search&&(0,b.jsx)(j,{label:`Search: "${r.search}"`,onRemove:()=>u("search")}),r.direction&&(0,b.jsx)(j,{label:`Direction: ${r.direction}`,onRemove:()=>u("direction")}),r.status&&(0,b.jsx)(j,{label:`Status: ${r.status}`,onRemove:()=>u("status")})]})]})}function j({label:a,onRemove:c}){return(0,b.jsxs)(g.Badge,{variant:"secondary",className:"gap-1",children:[a,(0,b.jsx)("button",{onClick:c,className:"ml-1 h-3 w-3 rounded-full hover:bg-muted-foreground/20",children:(0,b.jsx)(m,{className:"h-3 w-3"})})]})}let k=({className:a})=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),l=({className:a})=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"})}),m=({className:a})=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:a,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})});a.s(["MessagesFilters",()=>i],962781);var n=a.i(376246),o=a.i(422065),p=a.i(926445);function q({messages:a,isLoading:c=!1,showUserColumn:d=!0}){return c?(0,b.jsx)(w,{showUserColumn:d}):0===a.length?(0,b.jsx)("div",{className:"rounded-2xl bg-white shadow-lg shadow-black/[0.03] ring-1 ring-black/[0.05]",children:(0,b.jsx)("div",{className:"p-8 text-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"No messages found"})})}):(0,b.jsx)("div",{className:"rounded-2xl bg-white shadow-lg shadow-black/[0.03] ring-1 ring-black/[0.05]",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-gray-100",children:[d&&(0,b.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"User"}),(0,b.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"Direction"}),(0,b.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"Status"}),(0,b.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"Preview"}),(0,b.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"Time"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsx)(r,{message:a,showUserColumn:d},a.id))})]})})})}function r({message:a,showUserColumn:d}){var e;let[f,h]=(0,c.useState)(!1),i={inbound:"bg-orange-50 hover:bg-orange-100","outbound-delivered":"bg-blue-50 hover:bg-blue-100","outbound-sent":"bg-sky-50 hover:bg-sky-100","outbound-failed":"bg-red-50 hover:bg-red-100",queued:"bg-gray-50 hover:bg-gray-100"}["queue"===(e=a).source||"pending"===e.deliveryStatus?"queued":"inbound"===e.direction?"inbound":"delivered"===e.deliveryStatus?"outbound-delivered":"sent"===e.deliveryStatus||"queued"===e.deliveryStatus?"outbound-sent":"failed"===e.deliveryStatus||"undelivered"===e.deliveryStatus?"outbound-failed":"queued"];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("tr",{className:`border-b border-gray-50 cursor-pointer transition-all duration-200 ${i}`,onClick:()=>h(!f),children:[d&&(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)(n.default,{href:`/users/${a.clientId}`,onClick:a=>a.stopPropagation(),className:"hover:underline",children:[(0,b.jsx)("div",{className:"font-medium",children:a.userName||"Unknown"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:v(a.userPhone||"")})]})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(t,{direction:a.direction}),"queue"===a.source&&(0,b.jsx)(g.Badge,{variant:"outline",className:"text-xs",children:"Queue"})]})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(u,{status:a.deliveryStatus})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)("div",{className:"max-w-md truncate text-sm",children:[a.content.substring(0,80),a.content.length>80&&"..."]})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:(0,p.formatRelative)(a.createdAt)})})]}),f&&(0,b.jsx)("tr",{className:i,children:(0,b.jsx)("td",{colSpan:d?5:4,className:"p-4 border-b border-gray-100",children:(0,b.jsx)(s,{message:a})})})]})}function s({message:a}){return(0,b.jsxs)("div",{className:"space-y-4 bg-white/50 rounded-lg p-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium mb-2",children:"Full Content"}),(0,b.jsx)("p",{className:"whitespace-pre-wrap text-sm bg-gray-50 p-3 rounded",children:a.content})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"From:"}),(0,b.jsx)("div",{children:v(a.phoneFrom||"N/A")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"To:"}),(0,b.jsx)("div",{children:v(a.phoneTo||"N/A")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Provider:"}),(0,b.jsx)("div",{children:a.provider||"Queue"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"ID:"}),(0,b.jsxs)("div",{className:"font-mono text-xs",children:[a.id.slice(0,8),"..."]})]})]}),a.queueName&&(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Queue: "}),a.queueName,void 0!==a.sequenceNumber&&(0,b.jsxs)("span",{className:"ml-2 text-muted-foreground",children:["(#",a.sequenceNumber,")"]})]}),a.deliveryError&&(0,b.jsxs)("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:[(0,b.jsx)("strong",{children:"Error:"})," ",a.deliveryError]}),a.metadata&&Object.keys(a.metadata).length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium mb-2",children:"Metadata"}),(0,b.jsx)("pre",{className:"text-xs bg-gray-100 p-3 rounded overflow-auto max-h-40",children:JSON.stringify(a.metadata,null,2)})]})]})}function t({direction:a}){return"inbound"===a?(0,b.jsxs)(g.Badge,{className:"bg-orange-100 text-orange-700 hover:bg-orange-100",children:[(0,b.jsx)(x,{className:"h-3 w-3 mr-1"}),"In"]}):(0,b.jsxs)(g.Badge,{className:"bg-blue-100 text-blue-700 hover:bg-blue-100",children:[(0,b.jsx)(y,{className:"h-3 w-3 mr-1"}),"Out"]})}function u({status:a}){let c={pending:{label:"Pending",className:"bg-gray-100 text-gray-700"},queued:{label:"Queued",className:"bg-gray-100 text-gray-700"},sent:{label:"Sent",className:"bg-sky-100 text-sky-700"},delivered:{label:"Delivered",className:"bg-blue-100 text-blue-700"},failed:{label:"Failed",className:"bg-red-100 text-red-700"},undelivered:{label:"Undelivered",className:"bg-red-100 text-red-700"}},d=c[a]||c.queued;return(0,b.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d.className}`,children:d.label})}function v(a){if(!a)return"";let b=a.replace(/\D/g,"");if(11===b.length&&b.startsWith("1")){let a=b.slice(1);return`(${a.slice(0,3)}) ${a.slice(3,6)}-${a.slice(6)}`}return a}function w({showUserColumn:a}){return(0,b.jsx)("div",{className:"rounded-2xl bg-white shadow-lg shadow-black/[0.03] ring-1 ring-black/[0.05]",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-gray-100",children:[a&&(0,b.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"User"}),(0,b.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"Direction"}),(0,b.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"Status"}),(0,b.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"Preview"}),(0,b.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"Time"})]})}),(0,b.jsx)("tbody",{children:Array.from({length:10}).map((c,d)=>(0,b.jsxs)("tr",{className:"border-b border-gray-50",children:[a&&(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(o.Skeleton,{className:"h-4 w-24"}),(0,b.jsx)(o.Skeleton,{className:"h-3 w-28"})]})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(o.Skeleton,{className:"h-6 w-14"})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(o.Skeleton,{className:"h-6 w-20"})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(o.Skeleton,{className:"h-4 w-64"})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(o.Skeleton,{className:"h-4 w-24"})})]},d))})]})})})}let x=({className:a})=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:a,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 4.5l-15 15m0 0h11.25m-11.25 0V8.25"})}),y=({className:a})=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:a,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 19.5l15-15m0 0H8.25m11.25 0v11.25"})});a.s(["MessagesTable",()=>q],188581)}];

//# sourceMappingURL=apps_admin_src_components_admin_MessagesFilters_tsx_6ab536ef._.js.map