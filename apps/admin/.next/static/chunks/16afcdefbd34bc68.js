(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,29804,e=>{"use strict";var t=e.i(903334);let r=e.i(784705).forwardRef(({className:e="",...r},s)=>(0,t.jsx)("div",{ref:s,className:`animate-pulse rounded-md bg-muted ${e}`,...r}));r.displayName="Skeleton",e.s(["Skeleton",()=>r])},748306,e=>{"use strict";var t=e.i(903334);function r({className:e="",variant:r="default",...s}){return(0,t.jsx)("div",{className:`inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 ${{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}[r]} ${e}`,...s})}e.s(["Badge",()=>r])},953338,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},750593,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return n}});let s=e.r(784705);function n(e,t){let r=(0,s.useRef)(null),n=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=r.current;e&&(r.current=null,e());let t=n.current;t&&(n.current=null,t())}else e&&(r.current=a(e,s)),t&&(n.current=a(t,s))},[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},819991,e=>{"use strict";var t=e.i(903334);let r=e.i(784705).forwardRef(({className:e="",variant:r="default",size:s="default",...n},a)=>(0,t.jsx)("button",{className:`inline-flex items-center justify-center whitespace-nowrap rounded-xl text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 shadow-sm ${{default:"bg-blue-600 text-white hover:bg-blue-700 shadow-lg shadow-blue-600/25 hover:shadow-xl hover:shadow-blue-600/30 hover:scale-[1.02]",destructive:"bg-red-600 text-white hover:bg-red-700 shadow-lg shadow-red-600/25 hover:shadow-xl hover:shadow-red-600/30 hover:scale-[1.02]",outline:"border border-gray-200 bg-white text-gray-700 hover:bg-gray-50 shadow-sm hover:shadow-md hover:border-gray-300",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200 hover:scale-[1.02]",ghost:"text-gray-600 hover:bg-gray-100 hover:text-gray-900",link:"text-blue-600 underline-offset-4 hover:underline hover:text-blue-700"}[r]} ${{default:"h-10 px-4 py-2",sm:"h-9 rounded-xl px-3 text-sm",lg:"h-11 rounded-xl px-8 text-base",icon:"h-10 w-10"}[s]} ${e}`,ref:a,...n}));r.displayName="Button",e.s(["Button",()=>r])},316028,(e,t,r)=>{t.exports=e.r(242105)},758959,e=>{"use strict";var t=e.i(903334),r=e.i(784705);let s=r.forwardRef(({className:e="",...r},s)=>(0,t.jsx)("div",{ref:s,className:`rounded-2xl border-0 bg-white shadow-lg shadow-black/[0.03] ring-1 ring-black/[0.05] ${e}`,...r}));s.displayName="Card",r.forwardRef(({className:e="",...r},s)=>(0,t.jsx)("div",{ref:s,className:`flex flex-col space-y-1.5 p-6 ${e}`,...r})).displayName="CardHeader",r.forwardRef(({className:e="",...r},s)=>(0,t.jsx)("h3",{ref:s,className:`text-2xl font-semibold leading-none tracking-tight ${e}`,...r})).displayName="CardTitle",r.forwardRef(({className:e="",...r},s)=>(0,t.jsx)("p",{ref:s,className:`text-sm text-muted-foreground ${e}`,...r})).displayName="CardDescription",r.forwardRef(({className:e="",...r},s)=>(0,t.jsx)("div",{ref:s,className:`p-6 pt-0 ${e}`,...r})).displayName="CardContent",r.forwardRef(({className:e="",...r},s)=>(0,t.jsx)("div",{ref:s,className:`flex items-center p-6 pt-0 ${e}`,...r})).displayName="CardFooter",e.s(["Card",()=>s])},184039,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={assign:function(){return i},searchParamsToUrlQuery:function(){return a},urlQueryToSearchParams:function(){return l}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});function a(e){let t={};for(let[r,s]of e.entries()){let e=t[r];void 0===e?t[r]=s:Array.isArray(e)?e.push(s):t[r]=[e,s]}return t}function o(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function l(e){let t=new URLSearchParams;for(let[r,s]of Object.entries(e))if(Array.isArray(s))for(let e of s)t.append(r,o(e));else t.set(r,o(s));return t}function i(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,s]of r.entries())e.append(t,s)}return e}},414799,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={formatUrl:function(){return l},formatWithValidation:function(){return d},urlObjectKeys:function(){return i}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let a=e.r(744066)._(e.r(184039)),o=/https?|ftp|gopher|file/;function l(e){let{auth:t,hostname:r}=e,s=e.protocol||"",n=e.pathname||"",l=e.hash||"",i=e.query||"",d=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?d=t+e.host:r&&(d=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(d+=":"+e.port)),i&&"object"==typeof i&&(i=String(a.urlQueryToSearchParams(i)));let c=e.search||i&&`?${i}`||"";return s&&!s.endsWith(":")&&(s+=":"),e.slashes||(!s||o.test(s))&&!1!==d?(d="//"+(d||""),n&&"/"!==n[0]&&(n="/"+n)):d||(d=""),l&&"#"!==l[0]&&(l="#"+l),c&&"?"!==c[0]&&(c="?"+c),n=n.replace(/[?#]/g,encodeURIComponent),c=c.replace("#","%23"),`${s}${d}${n}${c}${l}`}let i=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function d(e){return l(e)}},288985,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={DecodeError:function(){return p},MiddlewareNotFoundError:function(){return N},MissingStaticPage:function(){return j},NormalizeError:function(){return v},PageNotFoundError:function(){return b},SP:function(){return x},ST:function(){return g},WEB_VITALS:function(){return a},execOnce:function(){return o},getDisplayName:function(){return u},getLocationOrigin:function(){return d},getURL:function(){return c},isAbsoluteUrl:function(){return i},isResSent:function(){return m},loadGetInitialProps:function(){return h},normalizeRepeatedSlashes:function(){return f},stringifyError:function(){return y}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let a=["CLS","FCP","FID","INP","LCP","TTFB"];function o(e){let t,r=!1;return(...s)=>(r||(r=!0,t=e(...s)),t)}let l=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=e=>l.test(e);function d(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function c(){let{href:e}=window.location,t=d();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function m(e){return e.finished||e.headersSent}function f(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function h(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await h(t.Component,t.ctx)}:{};let s=await e.getInitialProps(t);if(r&&m(r))return s;if(!s)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${s}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return s}let x="undefined"!=typeof performance,g=x&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class p extends Error{}class v extends Error{}class b extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class j extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class N extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function y(e){return JSON.stringify({message:e.message,stack:e.stack})}},360471,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return a}});let s=e.r(288985),n=e.r(905652);function a(e){if(!(0,s.isAbsoluteUrl)(e))return!0;try{let t=(0,s.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,n.hasBasePath)(r.pathname)}catch(e){return!1}}},78506,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},702718,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={default:function(){return p},useLinkStatus:function(){return b}};for(var n in s)Object.defineProperty(r,n,{enumerable:!0,get:s[n]});let a=e.r(744066),o=e.r(903334),l=a._(e.r(784705)),i=e.r(414799),d=e.r(405715),c=e.r(750593),u=e.r(288985),m=e.r(924321);e.r(953338);let f=e.r(675150),h=e.r(360471),x=e.r(309365);function g(e){return"string"==typeof e?e:(0,i.formatUrl)(e)}function p(t){var r;let s,n,a,[i,p]=(0,l.useOptimistic)(f.IDLE_LINK_STATUS),b=(0,l.useRef)(null),{href:j,as:N,children:y,prefetch:w=null,passHref:k,replace:C,shallow:S,scroll:P,onClick:$,onMouseEnter:E,onTouchStart:L,legacyBehavior:M=!1,onNavigate:O,ref:R,unstable_dynamicOnHover:T,..._}=t;s=y,M&&("string"==typeof s||"number"==typeof s)&&(s=(0,o.jsx)("a",{children:s}));let B=l.default.useContext(d.AppRouterContext),U=!1!==w,I=!1!==w?null===(r=w)||"auto"===r?x.FetchStrategy.PPR:x.FetchStrategy.Full:x.FetchStrategy.PPR,{href:A,as:F}=l.default.useMemo(()=>{let e=g(j);return{href:e,as:N?g(N):e}},[j,N]);if(M){if(s?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});n=l.default.Children.only(s)}let D=M?n&&"object"==typeof n&&n.ref:R,z=l.default.useCallback(e=>(null!==B&&(b.current=(0,f.mountLinkInstance)(e,A,B,I,U,p)),()=>{b.current&&((0,f.unmountLinkForCurrentNavigation)(b.current),b.current=null),(0,f.unmountPrefetchableInstance)(e)}),[U,A,B,I,p]),q={ref:(0,c.useMergedRef)(z,D),onClick(t){M||"function"!=typeof $||$(t),M&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(t),!B||t.defaultPrevented||function(t,r,s,n,a,o,i){if("undefined"!=typeof window){let d,{nodeName:c}=t.currentTarget;if("A"===c.toUpperCase()&&((d=t.currentTarget.getAttribute("target"))&&"_self"!==d||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,h.isLocalURL)(r)){a&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),i){let e=!1;if(i({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(641171);l.default.startTransition(()=>{u(s||r,a?"replace":"push",o??!0,n.current)})}}(t,A,F,b,C,P,O)},onMouseEnter(e){M||"function"!=typeof E||E(e),M&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),B&&U&&(0,f.onNavigationIntent)(e.currentTarget,!0===T)},onTouchStart:function(e){M||"function"!=typeof L||L(e),M&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e),B&&U&&(0,f.onNavigationIntent)(e.currentTarget,!0===T)}};return(0,u.isAbsoluteUrl)(F)?q.href=F:M&&!k&&("a"!==n.type||"href"in n.props)||(q.href=(0,m.addBasePath)(F)),a=M?l.default.cloneElement(n,q):(0,o.jsx)("a",{..._,...q,children:s}),(0,o.jsx)(v.Provider,{value:i,children:a})}e.r(78506);let v=(0,l.createContext)(f.IDLE_LINK_STATUS),b=()=>(0,l.useContext)(v);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},343646,e=>{"use strict";var t=e.i(903334),r=e.i(819991);function s({currentPage:e,totalPages:s,onPageChange:l,totalItems:i,itemsPerPage:d}){let c=function(e,t){if(t<=7)return Array.from({length:t},(e,t)=>t+1);let r=[];if(r.push(1),e<=4){for(let e=2;e<=5;e++)r.push(e);r.push("..."),r.push(t)}else if(e>=t-3){r.push("...");for(let e=t-4;e<=t;e++)r.push(e)}else{r.push("...");for(let t=e-1;t<=e+1;t++)r.push(t);r.push("..."),r.push(t)}return r}(e,s),u=(e-1)*(d||10)+1,m=Math.min(e*(d||10),i||0);return(0,t.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[i&&(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",u,"-",m," of ",i," results"]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>l(e-1),disabled:e<=1,className:"gap-1",children:[(0,t.jsx)(n,{className:"h-4 w-4"}),"Previous"]}),(0,t.jsx)("div",{className:"flex items-center gap-1 mx-2",children:c.map((s,n)=>{if("..."===s)return(0,t.jsx)("div",{className:"px-2",children:(0,t.jsx)(o,{className:"h-4 w-4 text-muted-foreground"})},`ellipsis-${n}`);let a=Number(s),i=a===e;return(0,t.jsx)(r.Button,{variant:i?"default":"outline",size:"sm",onClick:()=>l(a),className:"min-w-8",children:a},a)})}),(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>l(e+1),disabled:e>=s,className:"gap-1",children:["Next",(0,t.jsx)(a,{className:"h-4 w-4"})]})]})]})}let n=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),a=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),o=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})});e.s(["Pagination",()=>s])},509364,e=>{"use strict";var t=e.i(903334);let r=e.i(784705).forwardRef(({className:e="",type:r,...s},n)=>(0,t.jsx)("input",{type:r,className:`flex h-10 w-full rounded-lg border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e}`,ref:n,...s}));r.displayName="Input",e.s(["Input",()=>r])},215366,e=>{"use strict";var t=e.i(903334),r=e.i(819991);function s({title:e,subtitle:s,onRefresh:a,isLoading:o=!1,actions:l}){return(0,t.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold",children:e}),s&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:s})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[a&&(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:a,disabled:o,className:"gap-2",children:[(0,t.jsx)(n,{className:`h-4 w-4 ${o?"animate-spin":""}`}),"Refresh"]}),l]})]})}let n=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})});e.s(["AdminHeader",()=>s])},301108,e=>{"use strict";var t=e.i(903334),r=e.i(784705);let s=r.createContext({open:!1,setOpen:()=>{}}),n=({children:e})=>{let[n,a]=r.useState(!1);return(0,t.jsx)(s.Provider,{value:{open:n,setOpen:a},children:(0,t.jsx)("div",{className:"relative",children:e})})},a=r.forwardRef(({className:e="",onClick:n,asChild:a=!1,children:o,...l},i)=>{let{open:d,setOpen:c}=r.useContext(s),u=e=>{c(!d),n?.(e)};return a&&r.isValidElement(o)?r.cloneElement(o,{onClick:e=>{u(e);let t=o.props;t.onClick?.(e)}}):(0,t.jsx)("button",{ref:i,className:e,onClick:u,...l,children:o})});a.displayName="PopoverTrigger";let o=r.forwardRef(({className:e="",align:n="center",side:a="bottom",children:o,...l},i)=>{let{open:d,setOpen:c}=r.useContext(s),u=r.useRef(null);return(r.useEffect(()=>{let e=e=>{u.current&&!u.current.contains(e.target)&&c(!1)};if(d)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[d,c]),d)?(0,t.jsx)("div",{ref:e=>{u.current=e,"function"==typeof i?i(e):i&&(i.current=e)},className:`absolute z-50 min-w-[8rem] rounded-md border bg-white p-4 text-foreground shadow-md ${{top:"bottom-full mb-2",right:"left-full ml-2 top-0",bottom:"top-full mt-2",left:"right-full mr-2 top-0"}[a]} ${{start:"top"===a||"bottom"===a?"left-0":"top-0",center:"top"===a||"bottom"===a?"left-1/2 transform -translate-x-1/2":"top-1/2 transform -translate-y-1/2",end:"top"===a||"bottom"===a?"right-0":"bottom-0"}[n]} ${e}`,...l,children:o}):null});o.displayName="PopoverContent",e.s(["Popover",()=>n,"PopoverContent",()=>o,"PopoverTrigger",()=>a])},956444,984186,e=>{"use strict";var t=e.i(903334),r=e.i(784705),s=e.i(316028),n=e.i(509364),a=e.i(819991),o=e.i(748306),l=e.i(301108);function i({onFiltersChange:e,isLoading:i=!1,basePath:m="/messages"}){let f=(0,s.useRouter)(),h=(0,s.useSearchParams)(),[x,g]=(0,r.useState)(h.get("search")||""),[p,v]=(0,r.useState)({search:h.get("search")||void 0,direction:h.get("direction")||void 0,status:h.get("status")||void 0});(0,r.useEffect)(()=>{let e=setTimeout(()=>{v(e=>({...e,search:x||void 0}))},300);return()=>clearTimeout(e)},[x]),(0,r.useEffect)(()=>{let t=new URLSearchParams;Object.entries(p).forEach(([e,r])=>{void 0!==r&&""!==r&&t.set(e,r.toString())});let r=t.toString()?`${m}?${t.toString()}`:m;f.replace(r,{scroll:!1}),e(p)},[p,e,f,m]);let b=(0,r.useCallback)((e,t)=>{v(r=>({...r,[e]:t}))},[]),j=(0,r.useCallback)(e=>{v(t=>({...t,[e]:void 0})),"search"===e&&g("")},[]),N=(0,r.useCallback)(()=>{g(""),v({})},[]),y=Object.values(p).filter(e=>void 0!==e&&""!==e).length;return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(c,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(n.Input,{placeholder:"Search by phone or name...",value:x,onChange:e=>g(e.target.value),className:"pl-10",disabled:i})]}),(0,t.jsxs)(l.Popover,{children:[(0,t.jsx)(l.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(a.Button,{variant:"outline",className:"gap-2",disabled:i,children:[(0,t.jsx)(u,{className:"h-4 w-4"}),"Filters",y>0&&(0,t.jsx)(o.Badge,{variant:"secondary",className:"ml-1 h-5 min-w-5 rounded-full px-1 text-xs",children:y})]})}),(0,t.jsx)(l.PopoverContent,{className:"w-80",align:"end",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Filters"}),y>0&&(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",onClick:N,className:"h-auto p-0 text-xs",children:"Clear all"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Direction"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(a.Button,{variant:"inbound"===p.direction?"default":"outline",size:"sm",onClick:()=>b("direction","inbound"===p.direction?void 0:"inbound"),children:"Inbound"}),(0,t.jsx)(a.Button,{variant:"outbound"===p.direction?"default":"outline",size:"sm",onClick:()=>b("direction","outbound"===p.direction?void 0:"outbound"),children:"Outbound"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Status"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:["pending","sent","delivered","failed"].map(e=>(0,t.jsx)(a.Button,{variant:p.status===e?"default":"outline",size:"sm",onClick:()=>b("status",p.status===e?void 0:e),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]})})]})]}),y>0&&(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),p.search&&(0,t.jsx)(d,{label:`Search: "${p.search}"`,onRemove:()=>j("search")}),p.direction&&(0,t.jsx)(d,{label:`Direction: ${p.direction}`,onRemove:()=>j("direction")}),p.status&&(0,t.jsx)(d,{label:`Status: ${p.status}`,onRemove:()=>j("status")})]})]})}function d({label:e,onRemove:r}){return(0,t.jsxs)(o.Badge,{variant:"secondary",className:"gap-1",children:[e,(0,t.jsx)("button",{onClick:r,className:"ml-1 h-3 w-3 rounded-full hover:bg-muted-foreground/20",children:(0,t.jsx)(m,{className:"h-3 w-3"})})]})}let c=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),u=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"})}),m=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})});e.s(["MessagesFilters",()=>i],956444);var f=e.i(702718),h=e.i(29804),x=e.i(805612);function g({messages:e,isLoading:r=!1,showUserColumn:s=!0}){return r?(0,t.jsx)(y,{showUserColumn:s}):0===e.length?(0,t.jsx)("div",{className:"rounded-2xl bg-white shadow-lg shadow-black/[0.03] ring-1 ring-black/[0.05]",children:(0,t.jsx)("div",{className:"p-8 text-center",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"No messages found"})})}):(0,t.jsx)("div",{className:"rounded-2xl bg-white shadow-lg shadow-black/[0.03] ring-1 ring-black/[0.05]",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-100",children:[s&&(0,t.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"User"}),(0,t.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"Direction"}),(0,t.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"Status"}),(0,t.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"Preview"}),(0,t.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"Time"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsx)(p,{message:e,showUserColumn:s},e.id))})]})})})}function p({message:e,showUserColumn:s}){var n;let[a,l]=(0,r.useState)(!1),i={inbound:"bg-orange-50 hover:bg-orange-100","outbound-delivered":"bg-blue-50 hover:bg-blue-100","outbound-sent":"bg-sky-50 hover:bg-sky-100","outbound-failed":"bg-red-50 hover:bg-red-100",queued:"bg-gray-50 hover:bg-gray-100"}["queue"===(n=e).source||"pending"===n.deliveryStatus?"queued":"inbound"===n.direction?"inbound":"delivered"===n.deliveryStatus?"outbound-delivered":"sent"===n.deliveryStatus||"queued"===n.deliveryStatus?"outbound-sent":"failed"===n.deliveryStatus||"undelivered"===n.deliveryStatus?"outbound-failed":"queued"];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("tr",{className:`border-b border-gray-50 cursor-pointer transition-all duration-200 ${i}`,onClick:()=>l(!a),children:[s&&(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)(f.default,{href:`/users/${e.clientId}`,onClick:e=>e.stopPropagation(),className:"hover:underline",children:[(0,t.jsx)("div",{className:"font-medium",children:e.userName||"Unknown"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:N(e.userPhone||"")})]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(b,{direction:e.direction}),"queue"===e.source&&(0,t.jsx)(o.Badge,{variant:"outline",className:"text-xs",children:"Queue"})]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)(j,{status:e.deliveryStatus})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"max-w-md truncate text-sm",children:[e.content.substring(0,80),e.content.length>80&&"..."]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:(0,x.formatRelative)(e.createdAt)})})]}),a&&(0,t.jsx)("tr",{className:i,children:(0,t.jsx)("td",{colSpan:s?5:4,className:"p-4 border-b border-gray-100",children:(0,t.jsx)(v,{message:e})})})]})}function v({message:e}){return(0,t.jsxs)("div",{className:"space-y-4 bg-white/50 rounded-lg p-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Full Content"}),(0,t.jsx)("p",{className:"whitespace-pre-wrap text-sm bg-gray-50 p-3 rounded",children:e.content})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"From:"}),(0,t.jsx)("div",{children:N(e.phoneFrom||"N/A")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"To:"}),(0,t.jsx)("div",{children:N(e.phoneTo||"N/A")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Provider:"}),(0,t.jsx)("div",{children:e.provider||"Queue"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"ID:"}),(0,t.jsxs)("div",{className:"font-mono text-xs",children:[e.id.slice(0,8),"..."]})]})]}),e.queueName&&(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Queue: "}),e.queueName,void 0!==e.sequenceNumber&&(0,t.jsxs)("span",{className:"ml-2 text-muted-foreground",children:["(#",e.sequenceNumber,")"]})]}),e.deliveryError&&(0,t.jsxs)("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:[(0,t.jsx)("strong",{children:"Error:"})," ",e.deliveryError]}),e.metadata&&Object.keys(e.metadata).length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Metadata"}),(0,t.jsx)("pre",{className:"text-xs bg-gray-100 p-3 rounded overflow-auto max-h-40",children:JSON.stringify(e.metadata,null,2)})]})]})}function b({direction:e}){return"inbound"===e?(0,t.jsxs)(o.Badge,{className:"bg-orange-100 text-orange-700 hover:bg-orange-100",children:[(0,t.jsx)(w,{className:"h-3 w-3 mr-1"}),"In"]}):(0,t.jsxs)(o.Badge,{className:"bg-blue-100 text-blue-700 hover:bg-blue-100",children:[(0,t.jsx)(k,{className:"h-3 w-3 mr-1"}),"Out"]})}function j({status:e}){let r={pending:{label:"Pending",className:"bg-gray-100 text-gray-700"},queued:{label:"Queued",className:"bg-gray-100 text-gray-700"},sent:{label:"Sent",className:"bg-sky-100 text-sky-700"},delivered:{label:"Delivered",className:"bg-blue-100 text-blue-700"},failed:{label:"Failed",className:"bg-red-100 text-red-700"},undelivered:{label:"Undelivered",className:"bg-red-100 text-red-700"}},s=r[e]||r.queued;return(0,t.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.className}`,children:s.label})}function N(e){if(!e)return"";let t=e.replace(/\D/g,"");if(11===t.length&&t.startsWith("1")){let e=t.slice(1);return`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6)}`}return e}function y({showUserColumn:e}){return(0,t.jsx)("div",{className:"rounded-2xl bg-white shadow-lg shadow-black/[0.03] ring-1 ring-black/[0.05]",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-100",children:[e&&(0,t.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"User"}),(0,t.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"Direction"}),(0,t.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"Status"}),(0,t.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"Preview"}),(0,t.jsx)("th",{className:"p-4 text-left font-medium text-sm text-muted-foreground",children:"Time"})]})}),(0,t.jsx)("tbody",{children:Array.from({length:10}).map((r,s)=>(0,t.jsxs)("tr",{className:"border-b border-gray-50",children:[e&&(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(h.Skeleton,{className:"h-4 w-24"}),(0,t.jsx)(h.Skeleton,{className:"h-3 w-28"})]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)(h.Skeleton,{className:"h-6 w-14"})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)(h.Skeleton,{className:"h-6 w-20"})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)(h.Skeleton,{className:"h-4 w-64"})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)(h.Skeleton,{className:"h-4 w-24"})})]},s))})]})})})}let w=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:e,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 4.5l-15 15m0 0h11.25m-11.25 0V8.25"})}),k=({className:e})=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:e,children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 19.5l15-15m0 0H8.25m11.25 0v11.25"})});e.s(["MessagesTable",()=>g],984186)},737127,e=>{"use strict";var t=e.i(903334),r=e.i(784705),s=e.i(316028),n=e.i(702718),a=e.i(215366),o=e.i(956444),l=e.i(984186),i=e.i(343646),d=e.i(758959),c=e.i(29804);function u({userId:e}){let c=(0,s.useSearchParams)(),[u,f]=(0,r.useState)([]),[h,x]=(0,r.useState)(""),[g,p]=(0,r.useState)({totalMessages:0,inbound:0,outbound:0,pending:0,failed:0}),[v,b]=(0,r.useState)(!0),[j,N]=(0,r.useState)(null),[y,w]=(0,r.useState)(1),[k,C]=(0,r.useState)(1),S={search:c?.get("search")||void 0,direction:c?.get("direction")||void 0,status:c?.get("status")||void 0,clientId:e},[P,$]=(0,r.useState)(S),E=(0,r.useCallback)(async(t,r)=>{b(!0),N(null);try{let s=new URLSearchParams;t.direction&&s.set("direction",t.direction),t.status&&s.set("status",t.status),s.set("clientId",e),s.set("page",String(r)),s.set("pageSize","50");let n=await fetch(`/api/messages?${s.toString()}`),a=await n.json();if(!n.ok||!a.success)throw Error(a.message||"Failed to fetch messages");let{messages:o,pagination:l,stats:i}=a.data;f(o),C(l.totalPages),p(i),o.length>0&&o[0].userName&&x(o[0].userName)}catch(e){N("Failed to load messages"),console.error("Error fetching messages:",e)}finally{b(!1)}},[e]);(0,r.useEffect)(()=>{let t=async()=>{try{let t=await fetch(`/api/users/${e}`),r=await t.json();r.success&&r.data?.user?.name&&x(r.data.user.name)}catch{}};h||t()},[e,h]),(0,r.useEffect)(()=>{E(P,y)},[E,P,y]);let L=(0,r.useCallback)(t=>{$({...t,clientId:e}),w(1)},[e]),M=(0,r.useCallback)(e=>{w(e)},[]),O=(0,r.useCallback)(()=>{E(P,y)},[E,P,y]);return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50/50",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-6 max-w-7xl",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("nav",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(n.default,{href:"/users",className:"hover:text-foreground",children:"Users"}),(0,t.jsx)("span",{children:"/"}),(0,t.jsx)(n.default,{href:`/users/${e}`,className:"hover:text-foreground",children:h||e.slice(0,8)}),(0,t.jsx)("span",{children:"/"}),(0,t.jsx)("span",{className:"text-foreground",children:"Messages"})]}),(0,t.jsx)(a.AdminHeader,{title:h?`${h}'s Messages`:"User Messages",subtitle:`${g.totalMessages} total messages`,onRefresh:O,isLoading:v}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-5",children:[(0,t.jsx)(m,{title:"Total",value:g.totalMessages,variant:"primary",isLoading:v}),(0,t.jsx)(m,{title:"Inbound",value:g.inbound,variant:"warning",isLoading:v}),(0,t.jsx)(m,{title:"Outbound",value:g.outbound,variant:"info",isLoading:v}),(0,t.jsx)(m,{title:"Pending",value:g.pending,variant:"secondary",isLoading:v}),(0,t.jsx)(m,{title:"Failed",value:g.failed,variant:"danger",isLoading:v})]}),j&&(0,t.jsx)(d.Card,{className:"border-destructive/20 bg-destructive/5 p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-sm text-destructive",children:j}),(0,t.jsx)("button",{onClick:O,className:"text-sm text-destructive hover:underline",children:"Retry"})]})}),(0,t.jsx)(o.MessagesFilters,{onFiltersChange:L,isLoading:v,basePath:`/users/${e}/messages`}),(0,t.jsx)(l.MessagesTable,{messages:u,isLoading:v,showUserColumn:!1}),k>1&&(0,t.jsx)(i.Pagination,{currentPage:y,totalPages:k,onPageChange:M,totalItems:g.totalMessages,itemsPerPage:50})]})})})}function m({title:e,value:r,variant:s,isLoading:n=!1}){return n?(0,t.jsx)(d.Card,{className:"p-3",children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(c.Skeleton,{className:"h-3 w-12"}),(0,t.jsx)(c.Skeleton,{className:"h-5 w-8"})]})}):(0,t.jsx)(d.Card,{className:`p-3 border ${({primary:"bg-blue-50 text-blue-600 border-blue-100",success:"bg-green-50 text-green-600 border-green-100",warning:"bg-orange-50 text-orange-600 border-orange-100",info:"bg-sky-50 text-sky-600 border-sky-100",secondary:"bg-gray-50 text-gray-600 border-gray-100",danger:"bg-red-50 text-red-600 border-red-100"})[s].split(" ").slice(0,2).join(" ")}`,children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-gray-600",children:e}),(0,t.jsx)("p",{className:"text-lg font-bold text-gray-900",children:r})]})})}function f({params:e}){let{id:s}=(0,r.use)(e);return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"container mx-auto px-4 py-6 max-w-7xl",children:(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"text-lg text-muted-foreground",children:"Loading..."})})}),children:(0,t.jsx)(u,{userId:s})})}e.s(["default",()=>f])}]);