module.exports=[500874,(e,r,t)=>{r.exports=e.x("buffer",()=>require("buffer"))},688947,(e,r,t)=>{r.exports=e.x("stream",()=>require("stream"))},522734,(e,r,t)=>{r.exports=e.x("fs",()=>require("fs"))},406461,(e,r,t)=>{r.exports=e.x("zlib",()=>require("zlib"))},145706,(e,r,t)=>{r.exports=e.x("querystring",()=>require("querystring"))},792509,(e,r,t)=>{r.exports=e.x("url",()=>require("url"))},446786,(e,r,t)=>{r.exports=e.x("os",()=>require("os"))},504446,(e,r,t)=>{r.exports=e.x("net",()=>require("net"))},755004,(e,r,t)=>{r.exports=e.x("tls",()=>require("tls"))},427699,(e,r,t)=>{r.exports=e.x("events",()=>require("events"))},254799,(e,r,t)=>{r.exports=e.x("crypto",()=>require("crypto"))},921517,(e,r,t)=>{r.exports=e.x("http",()=>require("http"))},524836,(e,r,t)=>{r.exports=e.x("https",()=>require("https"))},449719,(e,r,t)=>{r.exports=e.x("assert",()=>require("assert"))},870722,(e,r,t)=>{r.exports=e.x("tty",()=>require("tty"))},401573,(e,r,t)=>{var n=e.r(500874),s=n.Buffer;function o(e,r){for(var t in e)r[t]=e[t]}function i(e,r,t){return s(e,r,t)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?r.exports=n:(o(n,t),t.Buffer=i),i.prototype=Object.create(s.prototype),o(s,i),i.from=function(e,r,t){if("number"==typeof e)throw TypeError("Argument must not be a number");return s(e,r,t)},i.alloc=function(e,r,t){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=s(e);return void 0!==r?"string"==typeof t?n.fill(r,t):n.fill(r):n.fill(0),n},i.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return s(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}},704503,(e,r,t)=>{"use strict";var n=e.r(500874).Buffer,s=e.r(500874).SlowBuffer;function o(e,r){if(!n.isBuffer(e)||!n.isBuffer(r)||e.length!==r.length)return!1;for(var t=0,s=0;s<e.length;s++)t|=e[s]^r[s];return 0===t}r.exports=o,o.install=function(){n.prototype.equal=s.prototype.equal=function(e){return o(this,e)}};var i=n.prototype.equal,a=s.prototype.equal;o.restore=function(){n.prototype.equal=i,s.prototype.equal=a}},462959,(e,r,t)=>{"use strict";function n(e){return(e/8|0)+ +(e%8!=0)}var s={ES256:n(256),ES384:n(384),ES512:n(521)};r.exports=function(e){var r=s[e];if(r)return r;throw Error('Unknown algorithm "'+e+'"')}},384423,(e,r,t)=>{"use strict";var n=e.r(401573).Buffer,s=e.r(462959);function o(e){if(n.isBuffer(e))return e;if("string"==typeof e)return n.from(e,"base64");throw TypeError("ECDSA signature must be a Base64 string or a Buffer")}function i(e,r,t){for(var n=0;r+n<t&&0===e[r+n];)++n;return e[r+n]>=128&&--n,n}r.exports={derToJose:function(e,r){e=o(e);var t=s(r),i=t+1,a=e.length,u=0;if(48!==e[u++])throw Error('Could not find expected "seq"');var c=e[u++];if(129===c&&(c=e[u++]),a-u<c)throw Error('"seq" specified length of "'+c+'", only "'+(a-u)+'" remaining');if(2!==e[u++])throw Error('Could not find expected "int" for "r"');var l=e[u++];if(a-u-2<l)throw Error('"r" specified length of "'+l+'", only "'+(a-u-2)+'" available');if(i<l)throw Error('"r" specified length of "'+l+'", max of "'+i+'" is acceptable');var p=u;if(u+=l,2!==e[u++])throw Error('Could not find expected "int" for "s"');var f=e[u++];if(a-u!==f)throw Error('"s" specified length of "'+f+'", expected "'+(a-u)+'"');if(i<f)throw Error('"s" specified length of "'+f+'", max of "'+i+'" is acceptable');var d=u;if((u+=f)!==a)throw Error('Expected to consume entire buffer, but "'+(a-u)+'" bytes remain');var m=t-l,g=t-f,h=n.allocUnsafe(m+l+g+f);for(u=0;u<m;++u)h[u]=0;e.copy(h,u,p+Math.max(-m,0),p+l),u=t;for(var E=u;u<E+g;++u)h[u]=0;return e.copy(h,u,d+Math.max(-g,0),d+f),h=(h=h.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,r){e=o(e);var t=s(r),a=e.length;if(a!==2*t)throw TypeError('"'+r+'" signatures must be "'+2*t+'" bytes, saw "'+a+'"');var u=i(e,0,t),c=i(e,t,e.length),l=t-u,p=t-c,f=2+l+1+1+p,d=f<128,m=n.allocUnsafe((d?2:3)+f),g=0;return m[g++]=48,d?m[g++]=f:(m[g++]=129,m[g++]=255&f),m[g++]=2,m[g++]=l,u<0?(m[g++]=0,g+=e.copy(m,g,0,t)):g+=e.copy(m,g,u,t),m[g++]=2,m[g++]=p,c<0?(m[g++]=0,e.copy(m,g,t)):e.copy(m,g,t+c),m}}},527577,(e,r,t)=>{function n(e,r,t,n){return Math.round(e/t)+" "+n+(r>=1.5*t?"s":"")}r.exports=function(e,r){r=r||{};var t,s,o,i,a=typeof e;if("string"===a&&e.length>0){var u=e;if(!((u=String(u)).length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(c){var l=parseFloat(c[1]);switch((c[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*l;case"weeks":case"week":case"w":return 6048e5*l;case"days":case"day":case"d":return 864e5*l;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*l;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*l;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*l;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:break}}}return}if("number"===a&&isFinite(e)){return r.long?(s=Math.abs(t=e))>=864e5?n(t,s,864e5,"day"):s>=36e5?n(t,s,36e5,"hour"):s>=6e4?n(t,s,6e4,"minute"):s>=1e3?n(t,s,1e3,"second"):t+" ms":(i=Math.abs(o=e))>=864e5?Math.round(o/864e5)+"d":i>=36e5?Math.round(o/36e5)+"h":i>=6e4?Math.round(o/6e4)+"m":i>=1e3?Math.round(o/1e3)+"s":o+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},41530,(e,r,t)=>{"use strict";r.exports=(e,r=process.argv)=>{let t=e.startsWith("-")?"":1===e.length?"-":"--",n=r.indexOf(t+e),s=r.indexOf("--");return -1!==n&&(-1===s||n<s)}},209596,(e,r,t)=>{"use strict";let n;e.r(446786);let s=e.r(870722),o=e.r(41530),{env:i}=process;function a(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function u(e,r){if(0===n)return 0;if(o("color=16m")||o("color=full")||o("color=truecolor"))return 3;if(o("color=256"))return 2;if(e&&!r&&void 0===n)return 0;let t=n||0;if("dumb"===i.TERM)return t;if("CI"in i)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(e=>e in i)||"codeship"===i.CI_NAME?1:t;if("TEAMCITY_VERSION"in i)return+!!/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(i.TEAMCITY_VERSION);if("truecolor"===i.COLORTERM)return 3;if("TERM_PROGRAM"in i){let e=parseInt((i.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(i.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(i.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)||"COLORTERM"in i?1:t}o("no-color")||o("no-colors")||o("color=false")||o("color=never")?n=0:(o("color")||o("colors")||o("color=true")||o("color=always"))&&(n=1),"FORCE_COLOR"in i&&(n="true"===i.FORCE_COLOR?1:"false"===i.FORCE_COLOR?0:0===i.FORCE_COLOR.length?1:Math.min(parseInt(i.FORCE_COLOR,10),3)),r.exports={supportsColor:function(e){return a(u(e,e&&e.isTTY))},stdout:a(u(!0,s.isatty(1))),stderr:a(u(!0,s.isatty(2)))}},681247,e=>{"use strict";e.i(791146);var r=e.i(832821),t=e.i(875559),n=e.i(66637);let s=new Map,o=(0,r.getTwilioSecrets)(),{baseUrl:i}=(0,t.getUrlsConfig)(),a=i?`${i}/api/twilio/status`:void 0,u=function(e,r){let t=e.accountSid;if(s.has(t))return s.get(t);let o=(0,n.default)(e.accountSid,e.authToken),i=e.phoneNumber,a={async sendSMS(e,t,n){try{let s=n&&n.length>0?"MMS":"SMS";if(console.log(`Sending ${s} from:`,i,"to:",e),n&&n.length>0&&console.log("Media URLs:",n),!t&&(!n||0===n.length))throw Error("Must provide either message text or media URLs");return await o.messages.create({...t&&{body:t},from:i,to:e,statusCallback:r,...n&&n.length>0&&{mediaUrl:n}})}catch(e){throw console.error("Error sending SMS/MMS:",e),e}},async sendMMS(e,r,t){return this.sendSMS(e,r,t)},getMessageStatus:async e=>await o.messages(e).fetch(),getFromNumber:()=>i};return s.set(t,a),a}({accountSid:o.accountSid,authToken:o.authToken,phoneNumber:o.phoneNumber},a);e.s(["twilioClient",0,u],681247)},918622,(e,r,t)=>{r.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,r,t)=>{r.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},224361,(e,r,t)=>{r.exports=e.x("util",()=>require("util"))},814747,(e,r,t)=>{r.exports=e.x("path",()=>require("path"))},193695,(e,r,t)=>{r.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},875559,452130,e=>{"use strict";e.i(454188);var r=e.i(331612);let t=r.z.object({messageHistoryLimit:r.z.number().int().positive().default(5),includeSystemMessages:r.z.boolean().default(!0),maxContextTokens:r.z.number().int().positive().default(1e3),reserveTokensForResponse:r.z.number().int().positive().default(1500),conversationGapMinutes:r.z.number().int().positive().default(30),enableCaching:r.z.boolean().default(!0),cacheTTLSeconds:r.z.number().int().nonnegative().default(600)}),n=r.z.object({smsMaxLength:r.z.number().int().positive().default(1600),contextMinutes:r.z.number().int().positive().default(10)}),s=r.z.enum(["twilio","local"]),o=r.z.object({provider:s.default("twilio")}),i=r.z.object({agentLogging:r.z.boolean().default(!1),enableConversationStorage:r.z.boolean().default(!0)}),a=r.z.object({timeoutMinutes:r.z.number().int().positive().default(30),maxLength:r.z.number().int().positive().default(100),inactiveThresholdDays:r.z.number().int().positive().default(7)}),u=r.z.object({defaultExpiryDays:r.z.number().int().positive().default(7),domain:r.z.string().optional()}),c=r.z.object({priceId:r.z.string().min(1)}),l=r.z.object({phoneNumbers:r.z.array(r.z.string()).default([]),maxRequestsPerWindow:r.z.number().int().positive().default(3),rateLimitWindowMinutes:r.z.number().int().positive().default(15),codeExpiryMinutes:r.z.number().int().positive().default(10),codeLength:r.z.number().int().positive().default(6),devBypassCode:r.z.string().optional()}),p=r.z.object({baseUrl:r.z.string().optional(),publicBaseUrl:r.z.string().optional()}),f=r.z.object({environment:r.z.enum(["development","staging","production"]),context:t,chat:n,messaging:o,features:i,conversation:a,shortLinks:u,stripe:c,admin:l,urls:p});function d(e){if(!e)return;let r=parseInt(e,10);return isNaN(r)?void 0:r}function m(e){if(void 0!==e)return"true"===e}let g=null;function h(){return g||(g=function(){var e;let r="staging"===process.env.APP_ENV?"staging":"production",t={environment:r,context:{messageHistoryLimit:d(process.env.CONTEXT_MESSAGE_HISTORY_LIMIT),includeSystemMessages:m(process.env.CONTEXT_INCLUDE_SYSTEM_MESSAGES),maxContextTokens:d(process.env.CONTEXT_MAX_TOKENS),reserveTokensForResponse:d(process.env.CONTEXT_RESERVE_TOKENS),conversationGapMinutes:d(process.env.CONTEXT_CONVERSATION_GAP_MINUTES),enableCaching:m(process.env.CONTEXT_ENABLE_CACHING),cacheTTLSeconds:d(process.env.CONTEXT_CACHE_TTL)},chat:{smsMaxLength:d(process.env.SMS_MAX_LENGTH),contextMinutes:d(process.env.CHAT_CONTEXT_MINUTES)},messaging:{provider:process.env.MESSAGING_PROVIDER},features:{agentLogging:m(process.env.AGENT_LOGGING),enableConversationStorage:m(process.env.ENABLE_CONVERSATION_STORAGE)},conversation:{timeoutMinutes:d(process.env.CONVERSATION_TIMEOUT_MINUTES),maxLength:d(process.env.MAX_CONVERSATION_LENGTH),inactiveThresholdDays:d(process.env.INACTIVE_THRESHOLD_DAYS)},shortLinks:{defaultExpiryDays:d(process.env.SHORT_LINK_DEFAULT_EXPIRY_DAYS),domain:process.env.SHORT_LINK_DOMAIN},stripe:{priceId:process.env.STRIPE_PRICE_ID},admin:{phoneNumbers:process.env.ADMIN_PHONE_NUMBERS?(e=process.env.ADMIN_PHONE_NUMBERS)?e.split(",").map(e=>e.trim()).filter(e=>e.length>0):[]:void 0,devBypassCode:process.env.DEV_BYPASS_CODE},urls:{baseUrl:process.env.BASE_URL,publicBaseUrl:"http://localhost:3000"}},n=f.safeParse(t);if(!n.success){let e=n.error.errors.map(e=>`  - ${e.path.join(".")}: ${e.message}`).join("\n");throw Error(`Configuration validation failed:
${e}

Environment: ${r}
Check your environment variables.`)}return n.data}()),g}function E(){return!0}r.z.object({NEXT_PUBLIC_BASE_URL:r.z.string().optional(),NEXT_PUBLIC_ANALYTICS_WRITE_KEY:r.z.string().optional(),NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY:r.z.string().optional()}),e.s(["isProductionEnvironment",()=>E],452130);let v=null;function x(){return h().chat}function T(){return h().messaging}function b(){return h().features}function y(){return h().shortLinks}function S(){return h().stripe}function _(){return h().admin}function C(){return h().urls}new Proxy({},{get:(e,r)=>(!v&&(v=h()),v)[r]}),e.s(["getAdminConfig",()=>_,"getChatConfig",()=>x,"getFeatureFlags",()=>b,"getMessagingConfig",()=>T,"getShortLinksConfig",()=>y,"getStripeConfig",()=>S,"getUrlsConfig",()=>C],875559)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__094623f8._.js.map