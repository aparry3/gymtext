module.exports=[193695,(e,r,t)=>{r.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},875559,452130,e=>{"use strict";e.i(454188);var r=e.i(331612);let t=r.z.object({messageHistoryLimit:r.z.number().int().positive().default(5),includeSystemMessages:r.z.boolean().default(!0),maxContextTokens:r.z.number().int().positive().default(1e3),reserveTokensForResponse:r.z.number().int().positive().default(1500),conversationGapMinutes:r.z.number().int().positive().default(30),enableCaching:r.z.boolean().default(!0),cacheTTLSeconds:r.z.number().int().nonnegative().default(600)}),n=r.z.object({smsMaxLength:r.z.number().int().positive().default(1600),contextMinutes:r.z.number().int().positive().default(10)}),o=r.z.enum(["twilio","local"]),s=r.z.object({provider:o.default("twilio")}),i=r.z.object({agentLogging:r.z.boolean().default(!1),enableConversationStorage:r.z.boolean().default(!0)}),a=r.z.object({timeoutMinutes:r.z.number().int().positive().default(30),maxLength:r.z.number().int().positive().default(100),inactiveThresholdDays:r.z.number().int().positive().default(7)}),u=r.z.object({defaultExpiryDays:r.z.number().int().positive().default(7),domain:r.z.string().optional()}),c=r.z.object({priceId:r.z.string().min(1)}),l=r.z.object({phoneNumbers:r.z.array(r.z.string()).default([]),maxRequestsPerWindow:r.z.number().int().positive().default(3),rateLimitWindowMinutes:r.z.number().int().positive().default(15),codeExpiryMinutes:r.z.number().int().positive().default(10),codeLength:r.z.number().int().positive().default(6),devBypassCode:r.z.string().optional()}),f=r.z.object({baseUrl:r.z.string().optional(),publicBaseUrl:r.z.string().optional()}),p=r.z.object({environment:r.z.enum(["development","staging","production"]),context:t,chat:n,messaging:s,features:i,conversation:a,shortLinks:u,stripe:c,admin:l,urls:f});function m(e){if(!e)return;let r=parseInt(e,10);return isNaN(r)?void 0:r}function d(e){if(void 0!==e)return"true"===e}let g=null;function h(){return g||(g=function(){var e;let r="staging"===process.env.APP_ENV?"staging":"production",t={environment:r,context:{messageHistoryLimit:m(process.env.CONTEXT_MESSAGE_HISTORY_LIMIT),includeSystemMessages:d(process.env.CONTEXT_INCLUDE_SYSTEM_MESSAGES),maxContextTokens:m(process.env.CONTEXT_MAX_TOKENS),reserveTokensForResponse:m(process.env.CONTEXT_RESERVE_TOKENS),conversationGapMinutes:m(process.env.CONTEXT_CONVERSATION_GAP_MINUTES),enableCaching:d(process.env.CONTEXT_ENABLE_CACHING),cacheTTLSeconds:m(process.env.CONTEXT_CACHE_TTL)},chat:{smsMaxLength:m(process.env.SMS_MAX_LENGTH),contextMinutes:m(process.env.CHAT_CONTEXT_MINUTES)},messaging:{provider:process.env.MESSAGING_PROVIDER},features:{agentLogging:d(process.env.AGENT_LOGGING),enableConversationStorage:d(process.env.ENABLE_CONVERSATION_STORAGE)},conversation:{timeoutMinutes:m(process.env.CONVERSATION_TIMEOUT_MINUTES),maxLength:m(process.env.MAX_CONVERSATION_LENGTH),inactiveThresholdDays:m(process.env.INACTIVE_THRESHOLD_DAYS)},shortLinks:{defaultExpiryDays:m(process.env.SHORT_LINK_DEFAULT_EXPIRY_DAYS),domain:process.env.SHORT_LINK_DOMAIN},stripe:{priceId:process.env.STRIPE_PRICE_ID},admin:{phoneNumbers:process.env.ADMIN_PHONE_NUMBERS?(e=process.env.ADMIN_PHONE_NUMBERS)?e.split(",").map(e=>e.trim()).filter(e=>e.length>0):[]:void 0,devBypassCode:process.env.DEV_BYPASS_CODE},urls:{baseUrl:process.env.BASE_URL,publicBaseUrl:"http://localhost:3000"}},n=p.safeParse(t);if(!n.success){let e=n.error.errors.map(e=>`  - ${e.path.join(".")}: ${e.message}`).join("\n");throw Error(`Configuration validation failed:
${e}

Environment: ${r}
Check your environment variables.`)}return n.data}()),g}function E(){return!0}r.z.object({NEXT_PUBLIC_BASE_URL:r.z.string().optional(),NEXT_PUBLIC_ANALYTICS_WRITE_KEY:r.z.string().optional(),NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY:r.z.string().optional()}),e.s(["isProductionEnvironment",()=>E],452130);let v=null;function T(){return h().chat}function b(){return h().messaging}function S(){return h().features}function x(){return h().shortLinks}function y(){return h().stripe}function _(){return h().admin}function C(){return h().urls}new Proxy({},{get:(e,r)=>(!v&&(v=h()),v)[r]}),e.s(["getAdminConfig",()=>_,"getChatConfig",()=>T,"getFeatureFlags",()=>S,"getMessagingConfig",()=>b,"getShortLinksConfig",()=>x,"getStripeConfig",()=>y,"getUrlsConfig",()=>C],875559)},681247,e=>{"use strict";e.i(791146);var r=e.i(832821),t=e.i(875559),n=e.i(66637);let o=new Map,s=(0,r.getTwilioSecrets)(),{baseUrl:i}=(0,t.getUrlsConfig)(),a=i?`${i}/api/twilio/status`:void 0,u=function(e,r){let t=e.accountSid;if(o.has(t))return o.get(t);let s=(0,n.default)(e.accountSid,e.authToken),i=e.phoneNumber,a={async sendSMS(e,t,n){try{let o=n&&n.length>0?"MMS":"SMS";if(console.log(`Sending ${o} from:`,i,"to:",e),n&&n.length>0&&console.log("Media URLs:",n),!t&&(!n||0===n.length))throw Error("Must provide either message text or media URLs");return await s.messages.create({...t&&{body:t},from:i,to:e,statusCallback:r,...n&&n.length>0&&{mediaUrl:n}})}catch(e){throw console.error("Error sending SMS/MMS:",e),e}},async sendMMS(e,r,t){return this.sendSMS(e,r,t)},getMessageStatus:async e=>await s.messages(e).fetch(),getFromNumber:()=>i};return o.set(t,a),a}({accountSid:s.accountSid,authToken:s.authToken,phoneNumber:s.phoneNumber},a);e.s(["twilioClient",0,u],681247)},967255,(e,r,t)=>{r.exports=e.x("pg",()=>require("pg"))},254799,(e,r,t)=>{r.exports=e.x("crypto",()=>require("crypto"))},921517,(e,r,t)=>{r.exports=e.x("http",()=>require("http"))},524836,(e,r,t)=>{r.exports=e.x("https",()=>require("https"))},427699,(e,r,t)=>{r.exports=e.x("events",()=>require("events"))},688947,(e,r,t)=>{r.exports=e.x("stream",()=>require("stream"))},522734,(e,r,t)=>{r.exports=e.x("fs",()=>require("fs"))},406461,(e,r,t)=>{r.exports=e.x("zlib",()=>require("zlib"))},145706,(e,r,t)=>{r.exports=e.x("querystring",()=>require("querystring"))},500874,(e,r,t)=>{r.exports=e.x("buffer",()=>require("buffer"))},792509,(e,r,t)=>{r.exports=e.x("url",()=>require("url"))},446786,(e,r,t)=>{r.exports=e.x("os",()=>require("os"))},504446,(e,r,t)=>{r.exports=e.x("net",()=>require("net"))},755004,(e,r,t)=>{r.exports=e.x("tls",()=>require("tls"))},449719,(e,r,t)=>{r.exports=e.x("assert",()=>require("assert"))},870722,(e,r,t)=>{r.exports=e.x("tty",()=>require("tty"))},401573,(e,r,t)=>{var n=e.r(500874),o=n.Buffer;function s(e,r){for(var t in e)r[t]=e[t]}function i(e,r,t){return o(e,r,t)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?r.exports=n:(s(n,t),t.Buffer=i),i.prototype=Object.create(o.prototype),s(o,i),i.from=function(e,r,t){if("number"==typeof e)throw TypeError("Argument must not be a number");return o(e,r,t)},i.alloc=function(e,r,t){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=o(e);return void 0!==r?"string"==typeof t?n.fill(r,t):n.fill(r):n.fill(0),n},i.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return o(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}},704503,(e,r,t)=>{"use strict";var n=e.r(500874).Buffer,o=e.r(500874).SlowBuffer;function s(e,r){if(!n.isBuffer(e)||!n.isBuffer(r)||e.length!==r.length)return!1;for(var t=0,o=0;o<e.length;o++)t|=e[o]^r[o];return 0===t}r.exports=s,s.install=function(){n.prototype.equal=o.prototype.equal=function(e){return s(this,e)}};var i=n.prototype.equal,a=o.prototype.equal;s.restore=function(){n.prototype.equal=i,o.prototype.equal=a}},462959,(e,r,t)=>{"use strict";function n(e){return(e/8|0)+ +(e%8!=0)}var o={ES256:n(256),ES384:n(384),ES512:n(521)};r.exports=function(e){var r=o[e];if(r)return r;throw Error('Unknown algorithm "'+e+'"')}},384423,(e,r,t)=>{"use strict";var n=e.r(401573).Buffer,o=e.r(462959);function s(e){if(n.isBuffer(e))return e;if("string"==typeof e)return n.from(e,"base64");throw TypeError("ECDSA signature must be a Base64 string or a Buffer")}function i(e,r,t){for(var n=0;r+n<t&&0===e[r+n];)++n;return e[r+n]>=128&&--n,n}r.exports={derToJose:function(e,r){e=s(e);var t=o(r),i=t+1,a=e.length,u=0;if(48!==e[u++])throw Error('Could not find expected "seq"');var c=e[u++];if(129===c&&(c=e[u++]),a-u<c)throw Error('"seq" specified length of "'+c+'", only "'+(a-u)+'" remaining');if(2!==e[u++])throw Error('Could not find expected "int" for "r"');var l=e[u++];if(a-u-2<l)throw Error('"r" specified length of "'+l+'", only "'+(a-u-2)+'" available');if(i<l)throw Error('"r" specified length of "'+l+'", max of "'+i+'" is acceptable');var f=u;if(u+=l,2!==e[u++])throw Error('Could not find expected "int" for "s"');var p=e[u++];if(a-u!==p)throw Error('"s" specified length of "'+p+'", expected "'+(a-u)+'"');if(i<p)throw Error('"s" specified length of "'+p+'", max of "'+i+'" is acceptable');var m=u;if((u+=p)!==a)throw Error('Expected to consume entire buffer, but "'+(a-u)+'" bytes remain');var d=t-l,g=t-p,h=n.allocUnsafe(d+l+g+p);for(u=0;u<d;++u)h[u]=0;e.copy(h,u,f+Math.max(-d,0),f+l),u=t;for(var E=u;u<E+g;++u)h[u]=0;return e.copy(h,u,m+Math.max(-g,0),m+p),h=(h=h.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,r){e=s(e);var t=o(r),a=e.length;if(a!==2*t)throw TypeError('"'+r+'" signatures must be "'+2*t+'" bytes, saw "'+a+'"');var u=i(e,0,t),c=i(e,t,e.length),l=t-u,f=t-c,p=2+l+1+1+f,m=p<128,d=n.allocUnsafe((m?2:3)+p),g=0;return d[g++]=48,m?d[g++]=p:(d[g++]=129,d[g++]=255&p),d[g++]=2,d[g++]=l,u<0?(d[g++]=0,g+=e.copy(d,g,0,t)):g+=e.copy(d,g,u,t),d[g++]=2,d[g++]=f,c<0?(d[g++]=0,e.copy(d,g,t)):e.copy(d,g,t+c),d}}},527577,(e,r,t)=>{function n(e,r,t,n){return Math.round(e/t)+" "+n+(r>=1.5*t?"s":"")}r.exports=function(e,r){r=r||{};var t,o,s,i,a=typeof e;if("string"===a&&e.length>0){var u=e;if(!((u=String(u)).length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(c){var l=parseFloat(c[1]);switch((c[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*l;case"weeks":case"week":case"w":return 6048e5*l;case"days":case"day":case"d":return 864e5*l;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*l;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*l;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*l;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:break}}}return}if("number"===a&&isFinite(e)){return r.long?(o=Math.abs(t=e))>=864e5?n(t,o,864e5,"day"):o>=36e5?n(t,o,36e5,"hour"):o>=6e4?n(t,o,6e4,"minute"):o>=1e3?n(t,o,1e3,"second"):t+" ms":(i=Math.abs(s=e))>=864e5?Math.round(s/864e5)+"d":i>=36e5?Math.round(s/36e5)+"h":i>=6e4?Math.round(s/6e4)+"m":i>=1e3?Math.round(s/1e3)+"s":s+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},41530,(e,r,t)=>{"use strict";r.exports=(e,r=process.argv)=>{let t=e.startsWith("-")?"":1===e.length?"-":"--",n=r.indexOf(t+e),o=r.indexOf("--");return -1!==n&&(-1===o||n<o)}},209596,(e,r,t)=>{"use strict";let n;e.r(446786);let o=e.r(870722),s=e.r(41530),{env:i}=process;function a(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function u(e,r){if(0===n)return 0;if(s("color=16m")||s("color=full")||s("color=truecolor"))return 3;if(s("color=256"))return 2;if(e&&!r&&void 0===n)return 0;let t=n||0;if("dumb"===i.TERM)return t;if("CI"in i)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(e=>e in i)||"codeship"===i.CI_NAME?1:t;if("TEAMCITY_VERSION"in i)return+!!/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(i.TEAMCITY_VERSION);if("truecolor"===i.COLORTERM)return 3;if("TERM_PROGRAM"in i){let e=parseInt((i.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(i.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(i.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)||"COLORTERM"in i?1:t}s("no-color")||s("no-colors")||s("color=false")||s("color=never")?n=0:(s("color")||s("colors")||s("color=true")||s("color=always"))&&(n=1),"FORCE_COLOR"in i&&(n="true"===i.FORCE_COLOR?1:"false"===i.FORCE_COLOR?0:0===i.FORCE_COLOR.length?1:Math.min(parseInt(i.FORCE_COLOR,10),3)),r.exports={supportsColor:function(e){return a(u(e,e&&e.isTTY))},stdout:a(u(!0,o.isatty(1))),stderr:a(u(!0,o.isatty(2)))}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__cfe7b191._.js.map