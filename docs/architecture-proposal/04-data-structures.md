# Data Structures - Markdown Examples & Generation

This document provides concrete examples of markdown structures and how to generate JSON from them when needed.

## User Dossier Examples

### Example 1: Beginner User

```markdown
# Training Dossier - Sarah Chen

## Profile
- **Name:** Sarah Chen
- **Age:** 24
- **Experience Level:** Beginner (3 months training)
- **Primary Goals:** Lose 20 lbs, build strength, improve overall fitness
- **Timezone:** America/Los_Angeles
- **Preferred Message Time:** 7:00 AM

## Equipment Access
- **Gym Membership:** Planet Fitness
- **Home Equipment:** Yoga mat, resistance bands (light)
- **Preferred Location:** Gym (more motivated with others around)

## Schedule & Availability
- **Training Days:** Monday, Wednesday, Friday
- **Typical Duration:** 30-40 minutes
- **Morning Preference:** 7:00-8:00 AM before work
- **Cannot Train:** Weekends (family commitments)

## Training History
### 2026-01-05 - First Session
- Starting point: 165 lbs, no prior strength training
- Focused on learning form with lighter weights
- Enjoyed the session, felt accomplished

### 2026-02-01 - One Month Progress
- Weight: 162 lbs
- Feeling stronger, form improving
- Requested more variety in exercises

## Current Training Plan
**Program:** Full Body 3x/Week (Beginner)
**Phase:** Week 4 of 4 (Building Consistency)
**Start Date:** 2026-01-05

### Weekly Pattern
- **Monday/Wednesday/Friday:** Full body workout
- Focus on compound movements
- 3 sets of 10-12 reps per exercise
- Gradual weight increases

## Preferences & Notes
- **Likes:** Variety, clear instructions, positive encouragement
- **Dislikes:** Very early mornings, complicated exercises
- **Injuries:** None
- **Communication Style:** Friendly, motivational, simple language
```

### Example 2: Advanced Athlete

```markdown
# Training Dossier - Marcus Johnson

## Profile
- **Name:** Marcus Johnson
- **Age:** 32
- **Experience Level:** Advanced (8 years consistent powerlifting)
- **Primary Goals:** Compete in powerlifting meet (April 2026), hit 1500 lb total
- **Current Maxes:** Squat 485 lbs, Bench 335 lbs, Deadlift 545 lbs (Total: 1365 lbs)
- **Timezone:** America/Chicago
- **Preferred Message Time:** 5:00 AM

## Equipment Access
- **Home Gym (fully equipped):**
  - Texas Power Bar + Deadlift Bar
  - Eleiko plates (full set, calibrated)
  - Competition squat rack (Rogue RM-4)
  - Competition bench (Rogue Westside)
  - Deadlift platform
  - Specialty bars (SSB, Swiss bar, Football bar)
  - Reverse hyper, GHD, belt squat

## Schedule & Availability
- **Training Days:** Monday, Tuesday, Thursday, Friday, Saturday (5 days)
- **Typical Duration:** 90-120 minutes
- **Morning Preference:** 5:00-7:00 AM (fasted training)
- **Cannot Train:** Wednesday (recovery/mobility), Sunday (complete rest)

## Training History
### 2024-11-10 - Last Meet (Chicago Open)
- Squat: 455 lbs (went 2/3)
- Bench: 315 lbs (went 3/3)
- Deadlift: 525 lbs (went 2/3)
- Total: 1295 lbs

### 2025-06-15 - Training Maxes Update
- Squat: 475 lbs × 1 @ RPE 9
- Bench: 325 lbs × 1 @ RPE 9
- Deadlift: 535 lbs × 1 @ RPE 9.5
- Note: Focusing on addressing weak lockout on deadlift

### 2026-01-20 - Current Cycle Start
- Beginning 12-week meet prep
- Target total: 1500 lbs (485/335/545 split)
- Emphasis: speed work, technique refinement

### 2026-02-16 - Week 4 Check-In
- Squat feeling strong (480 × 2 @ RPE 8)
- Bench progressing well (330 × 1 paused @ RPE 8.5)
- Deadlift lockout improving (deficit deads helping)
- Bodyweight: 218 lbs (target 220 for weigh-in)

## Current Training Plan
**Program:** 12-Week Meet Prep (Powerlifting Peaking)
**Phase:** Week 4 of 12 (Hypertrophy/Work Capacity)
**Start Date:** 2026-01-20
**Meet Date:** 2026-04-12 (Chicago Spring Classic)

### Weekly Pattern
- **Monday:** Squat Focus (Heavy)
- **Tuesday:** Bench Focus (Volume)
- **Thursday:** Deadlift Focus (Heavy)
- **Friday:** Squat/Bench Accessories
- **Saturday:** Deadlift Accessories + Conditioning

## Preferences & Notes
- **Likes:** Data-driven programming, RPE-based training, specificity
- **Dislikes:** Unnecessary fluff, high-rep cardio
- **Injuries:** Previous lower back tweak (2023, fully recovered), manages with mobility work
- **Modifications:** Includes beltless work and RDLs for back health
- **Supplements:** Creatine, whey protein, caffeine pre-workout
- **Communication Style:** Technical, detailed, no hand-holding
```

## Training Plan Examples

### Full Body Beginner Plan

```markdown
# 12-Week Full Body Strength Builder (Beginner)

**Program Owner:** GymText Core Programs
**User:** Sarah Chen
**Duration:** 12 weeks (2026-01-05 to 2026-03-29)
**Goal:** Build foundation strength, learn proper form, establish consistency

## Program Philosophy
Full body training 3x/week allows beginners to practice movements frequently while maintaining adequate recovery. Focus on compound movements, progressive overload through added weight or reps.

## Microcycle 1-4: Foundation Phase (Weeks 1-4)

### Weekly Pattern (Mon/Wed/Fri)

#### Full Body Workout
**Focus:** Learn movement patterns, build work capacity
**Volume:** 12-15 sets total

**Warm-Up (5 min):**
- Light cardio: 3 minutes
- Dynamic stretches: 2 minutes

**Main Workout:**

1. **Goblet Squat**
   - 3 sets × 10-12 reps
   - Start light, focus on depth and form
   - Rest: 90 seconds

2. **Dumbbell Bench Press**
   - 3 sets × 10-12 reps
   - Control the descent, full range of motion
   - Rest: 90 seconds

3. **Lat Pulldown**
   - 3 sets × 10-12 reps
   - Squeeze shoulder blades together
   - Rest: 90 seconds

4. **Dumbbell Romanian Deadlift**
   - 3 sets × 10-12 reps
   - Hinge at hips, feel hamstring stretch
   - Rest: 90 seconds

5. **Dumbbell Shoulder Press**
   - 2 sets × 10-12 reps
   - Seated or standing
   - Rest: 60 seconds

**Cool Down (3 min):**
- Stretching: quads, hamstrings, chest, shoulders

### Progression
- **Week 1:** Learn exercises, establish baseline weights
- **Week 2:** Add 2.5-5 lbs per exercise if form is good
- **Week 3:** Increase weight or add 1-2 reps
- **Week 4:** Deload (reduce weight 20%, same reps, focus on form)

## Microcycle 5-8: Strength Building (Weeks 5-8)

### Weekly Pattern
Same exercise structure, but:
- **Reps:** Shift to 8-10 reps (slightly heavier)
- **Sets:** Increase to 4 sets on main lifts (goblet squat, bench, pulldown)
- **Add:** Plank holds (3 sets × 30-60 sec) after main workout

## Microcycle 9-12: Strength & Conditioning (Weeks 9-12)

### Weekly Pattern
- **Monday/Friday:** Strength focus (6-8 reps, heavier weights)
- **Wednesday:** Conditioning focus (12-15 reps, lighter weights, supersets)
- **Add:** 10 min low-intensity cardio post-workout (bike or walk)

## Modification History
- **2026-02-01:** Added exercise variety per user request (rotating accessories)
```

### Powerlifting Meet Prep Plan

```markdown
# 12-Week Powerlifting Meet Prep

**Program Owner:** Conjugate Method (Modified)
**User:** Marcus Johnson
**Duration:** 12 weeks (2026-01-20 to 2026-04-12)
**Meet:** Chicago Spring Classic (April 12, 2026)
**Goal:** Total 1500 lbs (485/335/545 split)

## Program Philosophy
Periodized training with concurrent emphasis on max strength, speed, and work capacity. Weekly undulation between heavy, volume, and dynamic effort. Specific accessory work to address weak points (deadlift lockout).

## Microcycle 1-3: Hypertrophy/Work Capacity (Weeks 1-3)

### Weekly Pattern

#### Monday - Squat Focus (Heavy)
**Main Movement:** Competition Squat
- Week 1: 4 sets × 6 @ RPE 7-8 (405-425 lbs)
- Week 2: 5 sets × 5 @ RPE 8 (425-445 lbs)
- Week 3: 4 sets × 4 @ RPE 8-9 (445-465 lbs)

**Accessories:**
- Pause Squat (2 sec): 3 × 5 @ 70% of main work
- Bulgarian Split Squat: 3 × 8 per leg
- Leg Curls: 4 × 12
- Abs: Weighted planks 3 × 45 sec

#### Tuesday - Bench Focus (Volume)
**Main Movement:** Competition Bench Press (Paused)
- Week 1: 5 sets × 8 @ RPE 7 (255-275 lbs)
- Week 2: 6 sets × 6 @ RPE 7-8 (275-295 lbs)
- Week 3: 5 sets × 5 @ RPE 8 (295-315 lbs)

**Accessories:**
- Close Grip Bench: 4 × 8
- Dumbbell Row: 4 × 10
- Tricep Extension: 3 × 12
- Face Pulls: 3 × 20

#### Thursday - Deadlift Focus (Heavy)
**Main Movement:** Competition Deadlift
- Week 1: 4 sets × 5 @ RPE 7-8 (455-485 lbs)
- Week 2: 4 sets × 4 @ RPE 8 (485-505 lbs)
- Week 3: 4 sets × 3 @ RPE 8-9 (505-525 lbs)

**Weak Point Work:**
- Deficit Deadlift (2"): 3 × 5 @ 70%
- Block Pulls (mid-shin): 3 × 5 @ 90%

**Accessories:**
- Romanian Deadlift: 3 × 8
- Glute Ham Raise: 3 × 10
- Abs: Rollouts 3 × 10

#### Friday - Squat/Bench Accessories
**Dynamic Squat:** 8 sets × 3 @ 60% with bands (315 lbs)
**Dynamic Bench:** 8 sets × 3 @ 60% with pause (235 lbs)

**Accessories:**
- SSB Squat: 4 × 8
- Dumbbell Bench: 4 × 10
- Dumbbell Row: 4 × 10
- Lateral Raises: 3 × 15

#### Saturday - Deadlift Accessories + Conditioning
**Accessory Deadlift:** Snatch Grip Deadlift 4 × 6 @ 70% (365 lbs)

**Posterior Chain:**
- Reverse Hyper: 4 × 15
- Belt Squat: 3 × 12
- Cable Pullthroughs: 3 × 15
- Back Extensions: 3 × 12

**Conditioning:** Sled push/pull 10 min

## Microcycle 4-6: Strength Phase (Weeks 4-6)
*[Intensity increases, volume drops slightly]*
*[Squat: 3-4 reps @ RPE 8-9]*
*[Bench: 3-5 reps @ RPE 8-9]*
*[Deadlift: 2-4 reps @ RPE 8-9]*

## Microcycle 7-8: Intensification (Weeks 7-8)
*[Heavy singles and doubles @ RPE 9-9.5]*
*[Reduced accessories, focus on specificity]*

## Microcycle 9-10: Peak (Weeks 9-10)
*[Competition lifts only, no accessories]*
*[Singles @ opener/2nd attempt weights]*

## Microcycle 11: Deload (Week 11)
*[Reduce volume 60%, light technique work]*

## Microcycle 12: Meet Week (Week 12)
*[Mon: Light squat, Wed: Light bench/deadlift, Fri: Rest, Sat: Meet]*

## Attempt Selection Strategy
- **Opener:** 90% of training max (conservative)
- **2nd Attempt:** Add 10-20 lbs (match or exceed training max)
- **3rd Attempt:** Go for PR (based on 2nd attempt speed)

## Modification History
- **2026-01-20:** Program created based on current maxes and meet date
- **2026-02-16:** Added extra deficit deadlift volume (lockout focus)
```

## Workout Examples

### Beginner Full Body Workout

```markdown
# Workout - Monday, February 16, 2026
**Program:** 12-Week Full Body Strength Builder (Week 6, Day 1)
**Focus:** Full Body Strength

## Warm-Up (5 minutes)
1. Light Cardio: 3 minutes (treadmill walk @ 3.5 mph)
2. Dynamic Stretches: 2 minutes
   - Leg swings: 10 per leg
   - Arm circles: 10 forward, 10 backward
   - Hip circles: 10 each direction

## Main Workout

### 1. Goblet Squat
**Target:** 4 sets × 8-10 reps
- **Set 1 (warm-up):** 20 lbs × 10 reps
- **Set 2:** 35 lbs × 9 reps
- **Set 3:** 35 lbs × 8 reps
- **Set 4:** 35 lbs × 8 reps
**Rest:** 90 seconds between sets
**Notes:** Focus on depth - thighs parallel to floor

### 2. Dumbbell Bench Press
**Target:** 4 sets × 8-10 reps
- **Set 1 (warm-up):** 15 lbs × 10 reps
- **Set 2:** 20 lbs × 10 reps
- **Set 3:** 20 lbs × 9 reps
- **Set 4:** 20 lbs × 8 reps
**Rest:** 90 seconds between sets
**Notes:** Control descent, touch dumbbells to chest

### 3. Lat Pulldown
**Target:** 4 sets × 8-10 reps
- **Set 1:** 60 lbs × 10 reps
- **Set 2:** 70 lbs × 9 reps
- **Set 3:** 70 lbs × 8 reps
- **Set 4:** 70 lbs × 8 reps
**Rest:** 90 seconds between sets

### 4. Dumbbell Romanian Deadlift
**Target:** 4 sets × 8-10 reps
- **Set 1:** 15 lbs × 10 reps
- **Set 2:** 20 lbs × 9 reps
- **Set 3:** 20 lbs × 9 reps
- **Set 4:** 20 lbs × 8 reps
**Rest:** 90 seconds between sets
**Notes:** Hinge at hips, slight knee bend, feel hamstring stretch

### 5. Dumbbell Shoulder Press
**Target:** 3 sets × 8-10 reps
- **Set 1:** 12 lbs × 10 reps
- **Set 2:** 12 lbs × 9 reps
- **Set 3:** 12 lbs × 8 reps
**Rest:** 60 seconds between sets

## Cool Down (3 minutes)
- Quad stretch: 30 sec per leg
- Hamstring stretch: 30 sec per leg
- Chest stretch: 30 sec
- Shoulder stretch: 30 sec per side

## Notes
- Felt good today, form is improving!
- Next session: try 40 lbs on goblet squat
- Total time: 38 minutes
```

### Advanced Powerlifting Workout

```markdown
# Workout - Monday, February 16, 2026
**Program:** 12-Week Powerlifting Meet Prep (Week 4, Day 1)
**Focus:** Heavy Squat

## Warm-Up (10 minutes)
1. Bike: 5 minutes @ light resistance
2. Dynamic Mobility: 5 minutes
   - Hip circles: 10 each direction
   - Leg swings: 10 each direction per leg
   - Air squats: 15 reps
   - Cossack squats: 10 per side

## Specific Warm-Up
- **Bar × 10:** High bar squat (focus: depth, bracing)
- **135 lbs × 8:** Feel the groove
- **225 lbs × 5:** Start building tension
- **315 lbs × 3:** Dial in positioning
- **365 lbs × 2:** Heavy single prep
- **405 lbs × 1:** Opener warm-up

## Main Movement: Competition Squat

### Working Sets
**Target:** 4 sets × 4 @ RPE 8-9 (445-465 lbs)

- **Set 1:** 445 lbs × 4 @ RPE 8
  - Good depth, speed moderate, felt solid
- **Set 2:** 455 lbs × 4 @ RPE 8.5
  - Slight grind on rep 4, maintained form
- **Set 3:** 465 lbs × 4 @ RPE 9
  - Challenging, rep 4 was a grinder but good
- **Set 4:** 465 lbs × 4 @ RPE 9
  - Matched set 3, feeling strong

**Rest:** 4-5 minutes between sets

## Accessory Work

### Pause Squat (2 sec)
**Target:** 3 sets × 5 @ 70% (315 lbs)
- **Set 1:** 315 lbs × 5 (2 sec pause in hole)
- **Set 2:** 315 lbs × 5
- **Set 3:** 315 lbs × 5
**Rest:** 3 minutes

### Bulgarian Split Squat
**Target:** 3 sets × 8 per leg
- **Set 1:** 50 lbs (dumbbells) × 8 per leg
- **Set 2:** 50 lbs × 8 per leg
- **Set 3:** 50 lbs × 8 per leg
**Rest:** 90 seconds

### Leg Curl
**Target:** 4 sets × 12
- **Set 1:** 90 lbs × 12
- **Set 2:** 100 lbs × 12
- **Set 3:** 100 lbs × 12
- **Set 4:** 100 lbs × 11
**Rest:** 60 seconds

### Weighted Plank
**Target:** 3 sets × 45 sec
- **Set 1:** 45 lbs plate × 45 sec
- **Set 2:** 45 lbs × 45 sec
- **Set 3:** 45 lbs × 42 sec
**Rest:** 60 seconds

## Cool Down (8 minutes)
- Foam roll: quads, IT band, glutes (3 min)
- Static stretch: hip flexors, hamstrings, glutes (5 min)

## Post-Workout Notes
- **RPE Assessment:** 465×4 was accurate RPE 9, good progression
- **Form Check:** Depth consistent, bracing solid
- **Next Week:** Target 470×4 or 475×3
- **Recovery:** Legs feel worked but not overly fatigued
- **Bodyweight:** 217 lbs (pre-workout)
- **Total Time:** 95 minutes
```

## Markdown → JSON Generation

### Example: User Dossier → Profile JSON

**Input (Markdown):**
```markdown
## Profile
- **Name:** Sarah Chen
- **Age:** 24
- **Experience Level:** Beginner (3 months training)
- **Primary Goals:** Lose 20 lbs, build strength, improve overall fitness
```

**Lightweight Extraction Agent:**
```typescript
const extractProfile = async (markdown: string) => {
  const prompt = `
Extract structured profile data from this markdown section:

${markdown}

Return JSON with keys: name, age, experience, primaryGoals (array)
  `;
  
  const result = await llm.invoke(prompt, {
    response_format: { type: 'json_object' }
  });
  
  return JSON.parse(result.content);
};
```

**Output (JSON):**
```json
{
  "name": "Sarah Chen",
  "age": 24,
  "experience": "Beginner",
  "primaryGoals": [
    "Lose 20 lbs",
    "build strength",
    "improve overall fitness"
  ]
}
```

### Example: Workout → Structured Workout JSON

**Input (Markdown):**
```markdown
### 1. Barbell Bench Press
**Target:** 4 sets × 4-6 reps @ RPE 8-9
- **Set 1:** 135 lbs × 6 reps (warm-up)
- **Set 2:** 185 lbs × 5 reps
- **Set 3:** 205 lbs × 4 reps (RPE 9)
- **Set 4:** 205 lbs × 4 reps (RPE 9)
**Rest:** 3-4 minutes between sets
```

**Lightweight Extraction:**
```typescript
const extractExercise = (exerciseMarkdown: string) => {
  const name = exerciseMarkdown.match(/###\s+\d+\.\s+(.+)/)?.[1];
  const sets = [];
  
  const setMatches = exerciseMarkdown.matchAll(/Set \d+.*?(\d+)\s*lbs\s*×\s*(\d+)\s*reps/g);
  for (const match of setMatches) {
    sets.push({
      weight: parseInt(match[1]),
      reps: parseInt(match[2])
    });
  }
  
  return { name, sets };
};
```

**Output (JSON):**
```json
{
  "name": "Barbell Bench Press",
  "sets": [
    { "weight": 135, "reps": 6 },
    { "weight": 185, "reps": 5 },
    { "weight": 205, "reps": 4 },
    { "weight": 205, "reps": 4 }
  ]
}
```

## Storage Strategy

**Database Columns:**
```sql
CREATE TABLE user_dossiers (
  user_id UUID PRIMARY KEY,
  markdown TEXT NOT NULL,                  -- Source of truth
  profile_json JSONB GENERATED ALWAYS AS (
    extract_profile_json(markdown)         -- Generated column
  ) STORED,
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

Or for flexibility (regenerate on demand):
```sql
CREATE TABLE user_dossiers (
  user_id UUID PRIMARY KEY,
  markdown TEXT NOT NULL,
  cached_profile_json JSONB,              -- Cache, can be null
  cache_version INT DEFAULT 1,             -- Invalidate when format changes
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Regenerate cached JSON when needed
UPDATE user_dossiers 
SET cached_profile_json = extract_profile_json(markdown),
    cache_version = 2
WHERE cache_version < 2;
```

## Template System

### Workout Template
```typescript
const workoutTemplate = `
# Workout - {{day}}, {{date}}
**Program:** {{program_name}} (Week {{week}}, Day {{day_number}})
**Focus:** {{focus}}

## Warm-Up ({{warmup_duration}} minutes)
{{warmup_exercises}}

## Main Workout
{{#each exercises}}
### {{index}}. {{name}}
**Target:** {{sets}} sets × {{reps}} reps{{#if intensity}} @ {{intensity}}{{/if}}
{{#each sets}}
- **Set {{set_number}}:** {{weight}} lbs × {{reps}} reps{{#if rpe}} (RPE {{rpe}}){{/if}}
{{/each}}
**Rest:** {{rest_time}}
{{#if notes}}**Notes:** {{notes}}{{/if}}

{{/each}}

## Cool Down ({{cooldown_duration}} minutes)
{{cooldown_exercises}}

## Notes
{{workout_notes}}
`;
```

## Next: Migration Path

Read `05-migration-path.md` for the step-by-step transition strategy.
